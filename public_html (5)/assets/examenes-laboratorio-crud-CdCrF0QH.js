import{j as e,r as p,E as Q,a as Y,u as L,w as K,b as X}from"./vendor-21pl5SCj.js";const Z=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1",$=Z?"https://clinica2demayo.com/":"http://localhost/clinica-2demayo/";function ee({open:g,onClose:m,children:y}){return g?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-white rounded shadow-lg p-4 w-full max-w-5xl relative animate-fadeIn flex flex-col",style:{maxHeight:"90vh"},children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl font-bold",onClick:m,"aria-label":"Cerrar",children:"×"}),e.jsx("div",{className:"overflow-auto",style:{maxHeight:"70vh",paddingRight:8},children:y})]})}):null}const re={tipo:"Parámetro",nombre:"",metodologia:"",unidad:"",opciones:[],referencias:[],formula:"",negrita:!1,color_texto:"#000000",color_fondo:"#ffffff",orden:1};function se({initialData:g=[],onChange:m}){const y=t=>{let o=[];try{if(!t)return[];if(typeof t=="string"){const s=JSON.parse(t);Array.isArray(s)&&(o=s)}else Array.isArray(t)&&(o=t)}catch(s){console.error("Error parsing valores_referenciales:",s),o=[]}return o.map((s,l)=>({tipo:s.tipo||"Parámetro",nombre:s.nombre||s.titulo||""||`Item ${l+1}`,metodologia:s.metodologia||"",unidad:s.unidad||"",opciones:Array.isArray(s.opciones)?s.opciones:[],referencias:Array.isArray(s.referencias)?s.referencias:[],formula:s.formula||"",negrita:!!s.negrita,color_texto:s.color_texto||"#000000",color_fondo:s.color_fondo||"#ffffff",orden:typeof s.orden=="number"?s.orden:l+1}))},[b,h]=p.useState(()=>y(g));p.useEffect(()=>{h(y(g))},[g]);const N=t=>{h([...b,{...re,tipo:t,nombre:t==="Parámetro"?"Nuevo parámetro":"Nuevo subtítulo",orden:b.length+1}])},c=(t,o,s)=>{const l=b.map((i,f)=>f===t?{...i,[o]:s}:i);h(l),m&&m(l)},S=t=>{const o=b.filter((s,l)=>l!==t);h(o),m&&m(o)},C=t=>{const o=b.map((s,l)=>l===t?{...s,referencias:[...s.referencias,{valor:"",desc:"",valor_min:"",valor_max:""}]}:s);h(o),m&&m(o)},w=(t,o,s,l)=>{const i=b.map((f,x)=>{if(x!==t)return f;const k=f.referencias.map((j,T)=>T===o?{...j,[s]:l}:j);return{...f,referencias:k}});h(i),m&&m(i)},d=(t,o)=>{const s=b.map((l,i)=>{if(i!==t)return l;const f=l.referencias.filter((x,k)=>k!==o);return{...l,referencias:f}});h(s),m&&m(s)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("button",{type:"button",className:"bg-green-600 text-white px-3 py-1 rounded",onClick:()=>N("Parámetro"),children:"+ Parámetro"}),e.jsx("button",{type:"button",className:"bg-blue-600 text-white px-3 py-1 rounded",onClick:()=>N("Subtítulo"),children:"+ Subtítulo"})]}),b.map((t,o)=>e.jsxs("div",{className:"border rounded p-3 bg-gray-50 relative",children:[e.jsx("button",{type:"button",className:"absolute top-2 right-2 text-red-600 bg-red-100 hover:bg-red-200 border border-red-300 rounded-md px-2 py-1 transition-all flex items-center justify-center",style:{minWidth:56,fontSize:13},onClick:()=>S(o),children:"Eliminar"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 items-center",children:[e.jsxs("select",{value:t.tipo,onChange:s=>c(o,"tipo",s.target.value),className:"border rounded px-2 py-1",children:[e.jsx("option",{value:"Parámetro",children:"Parámetro"}),e.jsx("option",{value:"Subtítulo",children:"Subtítulo"})]}),e.jsx("input",{value:t.nombre,onChange:s=>c(o,"nombre",s.target.value),placeholder:"Nombre",className:"border rounded px-2 py-1 flex-1"}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:t.negrita,onChange:s=>c(o,"negrita",s.target.checked)})," Negrita"]}),e.jsx("input",{type:"color",value:t.color_texto,onChange:s=>c(o,"color_texto",s.target.value),title:"Color texto",style:{width:28,height:28,minWidth:28,minHeight:28,padding:0,border:"none"}}),e.jsx("input",{type:"color",value:t.color_fondo,onChange:s=>c(o,"color_fondo",s.target.value),title:"Color fondo",style:{width:28,height:28,minWidth:28,minHeight:28,padding:0,border:"none",marginRight:64}})]}),t.tipo==="Parámetro"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{value:t.metodologia,onChange:s=>c(o,"metodologia",s.target.value),placeholder:"Metodología",className:"border rounded px-2 py-1 flex-1"}),e.jsx("input",{value:t.unidad,onChange:s=>c(o,"unidad",s.target.value),placeholder:"Unidad",className:"border rounded px-2 py-1 w-32"}),e.jsx("input",{value:t.formula,onChange:s=>c(o,"formula",s.target.value),placeholder:"Fórmula (opcional)",className:"border rounded px-2 py-1 flex-1"})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Referencias:"}),e.jsx("button",{type:"button",className:"ml-2 text-green-600",onClick:()=>C(o),children:"+ Referencia"}),t.referencias.map((s,l)=>e.jsxs("div",{className:"flex gap-2 mt-1 items-center flex-wrap relative",children:[e.jsx("input",{value:s.valor,onChange:i=>w(o,l,"valor",i.target.value),placeholder:"Valor texto",className:"border rounded px-2 py-1 w-28"}),e.jsx("input",{value:s.valor_min,onChange:i=>w(o,l,"valor_min",i.target.value),placeholder:"Min",className:"border rounded px-2 py-1 w-16"}),e.jsx("input",{value:s.valor_max,onChange:i=>w(o,l,"valor_max",i.target.value),placeholder:"Max",className:"border rounded px-2 py-1 w-16"}),e.jsx("input",{value:s.desc,onChange:i=>w(o,l,"desc",i.target.value),placeholder:"Descripción",className:"border rounded px-2 py-1 flex-1"}),e.jsx("button",{type:"button",className:"text-red-600 bg-red-100 hover:bg-red-200 border border-red-300 rounded-md px-2 py-1 ml-6 transition-all flex items-center justify-center",style:{minWidth:56,fontSize:13,alignSelf:"center"},onClick:()=>d(o,l),children:"Eliminar"})]},l))]})]})]},o))]})}function te(){const[g,m]=p.useState("table"),[y,b]=p.useState(5),[h,N]=p.useState(0),[c,S]=p.useState([]),[C,w]=p.useState(""),[d,t]=p.useState({nombre:"",categoria:"",metodologia:"",valores_referenciales:[{tipo:"Parámetro",nombre:"",metodologia:"",unidad:"",referencias:[],formula:""}],precio_publico:"",precio_convenio:"",tipo_tubo:"",tipo_frasco:"",tiempo_resultado:"",condicion_paciente:"",preanalitica:"",titulo:"",es_subtitulo:!1}),[o,s]=p.useState(!1),[l,i]=p.useState(null),[f,x]=p.useState(""),[k,j]=p.useState("success"),[T,z]=p.useState(!1),O=()=>{try{const r=new Q;r.text("Exámenes de Laboratorio",14,10),Y(r,{head:[["Nombre","Metodología","Tubo","Frasco","Tiempo","Público","Convenio"]],body:_.map(a=>[a.nombre,a.metodologia,a.tipo_tubo,a.tipo_frasco,a.tiempo_resultado,a.precio_publico,a.precio_convenio]),startY:18,styles:{fontSize:8}}),r.save("examenes_laboratorio.pdf")}catch(r){console.error("Error exportando PDF:",r),alert("Error exportando PDF. Revisa la consola para más detalles.")}},W=()=>{const r=L.json_to_sheet(_.map(u=>({Nombre:u.nombre,Metodología:u.metodologia,Tubo:u.tipo_tubo,Frasco:u.tipo_frasco,Tiempo:u.tiempo_resultado,Público:u.precio_publico,Convenio:u.precio_convenio}))),a=L.book_new();L.book_append_sheet(a,r,"Examenes");const n=K(a,{bookType:"xlsx",type:"array"});X.saveAs(new Blob([n],{type:"application/octet-stream"}),"examenes_laboratorio.xlsx")},A=async()=>{z(!0);const a=await(await fetch($+"api_examenes_laboratorio.php",{credentials:"include"})).json();S(a.examenes||[]),z(!1)};p.useEffect(()=>{A()},[]);const v=r=>{const{name:a,value:n,type:u,checked:I}=r.target;t(P=>({...P,[a]:u==="checkbox"?I:n}))},U=r=>{t(a=>({...a,valores_referenciales:r}))},D=r=>{if(!r)return[];try{if(typeof r=="string"){const a=JSON.parse(r);if(Array.isArray(a))r=a;else return[]}}catch(a){return console.error("Error parsing valores_referenciales:",a),[]}return r.map((a,n)=>({tipo:a.tipo||"Parámetro",nombre:a.nombre||a.titulo||""||`Item ${n+1}`,metodologia:a.metodologia||"",unidad:a.unidad||"",referencias:Array.isArray(a.referencias)?a.referencias:[],formula:a.formula||"",negrita:!!a.negrita,color_texto:a.color_texto||"#000000",color_fondo:a.color_fondo||"#ffffff",orden:typeof a.orden=="number"?a.orden:n+1}))},J=async r=>{r.preventDefault(),x(""),j("success");try{const a=l?"PUT":"POST",n=$+"api_examenes_laboratorio.php"+(l?`?id=${l}`:""),u={...d,valores_referenciales:D(d.valores_referenciales)};l&&(u.id=l);const P=await(await fetch(n,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(u),credentials:"include"})).json();P.success?(x(l?"✅ Examen actualizado correctamente":"✅ Examen creado correctamente"),j("success"),t({nombre:"",metodologia:"",valores_referenciales:[{tipo:"Parámetro",nombre:"",metodologia:"",unidad:"",referencias:[],formula:""}],precio_publico:"",precio_convenio:"",tipo_tubo:"",tipo_frasco:"",tiempo_resultado:"",condicion_paciente:"",preanalitica:""}),i(null),s(!1),A(),setTimeout(()=>x(""),3e3)):(x("❌ "+(P.error||"Error al guardar")),j("error"))}catch{x("❌ Error de conexión"),j("error")}},V=r=>{const a=D(r.valores_referenciales);t({...r,categoria:r.categoria||"",valores_referenciales:a.length?a:[{tipo:"Parámetro",nombre:"",metodologia:"",unidad:"",referencias:[],formula:""}],titulo:r.titulo||"",es_subtitulo:r.es_subtitulo||!1}),i(r.id),x(""),s(!0)},B=()=>{t({nombre:"",categoria:"",metodologia:"",valores_referenciales:[{tipo:"Parámetro",nombre:"",metodologia:"",unidad:"",referencias:[],formula:""}],precio_publico:"",precio_convenio:"",tipo_tubo:"",tipo_frasco:"",tiempo_resultado:"",condicion_paciente:"",preanalitica:"",titulo:"",es_subtitulo:!1}),i(null),x(""),s(!0)},H=async r=>{if(window.confirm("¿Está seguro de eliminar este examen? Esta acción no se puede deshacer."))try{const n=await(await fetch($+`api_examenes_laboratorio.php?id=${r}`,{method:"DELETE",credentials:"include"})).json();n.success?(x("✅ Examen eliminado correctamente"),j("success"),A(),setTimeout(()=>x(""),3e3)):(x("❌ "+(n.error||"Error al eliminar")),j("error"))}catch{x("❌ Error de conexión"),j("error")}},[M,q]=p.useState(""),G=Array.from(new Set(c.map(r=>r.categoria).filter(Boolean))),_=c.filter(r=>(r.nombre.toLowerCase().includes(C.toLowerCase())||r.metodologia.toLowerCase().includes(C.toLowerCase()))&&(M===""||r.categoria===M)),E={total:c.length,conParametros:c.filter(r=>r.valores_referenciales&&Array.isArray(r.valores_referenciales)&&r.valores_referenciales.length>0).length,precioPromedio:c.length>0?Math.round(c.reduce((r,a)=>r+(parseFloat(a.precio_publico)||0),0)/c.length):0,metodologias:[...new Set(c.map(r=>r.metodologia).filter(Boolean))].length},F=Math.ceil(_.length/y),R=_.slice(h*y,(h+1)*y);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 text-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl",children:"🔬"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Gestión de Exámenes de Laboratorio"}),e.jsx("p",{className:"text-purple-100",children:"Administre el catálogo completo de exámenes y pruebas de laboratorio"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm",children:"Total Exámenes"}),e.jsx("p",{className:"text-2xl font-bold",children:E.total})]}),e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center text-xl",children:"🧪"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Con Parámetros"}),e.jsx("p",{className:"text-2xl font-bold",children:E.conParametros})]}),e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center text-xl",children:"📊"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-100 text-sm",children:"Precio Promedio"}),e.jsxs("p",{className:"text-2xl font-bold",children:["S/ ",E.precioPromedio]})]}),e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center text-xl",children:"💰"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-100 text-sm",children:"Metodologías"}),e.jsx("p",{className:"text-2xl font-bold",children:E.metodologias})]}),e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center text-xl",children:"🔬"})]})})]}),f&&e.jsx("div",{className:`mb-6 p-4 rounded-lg border ${k==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:e.jsx("div",{className:"flex items-center gap-2 font-medium",children:f})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"flex-1 max-w-md",children:[e.jsx("div",{className:"relative mb-2",children:e.jsx("input",{type:"text",value:C,onChange:r=>{w(r.target.value),N(0)},placeholder:"🔍 Buscar por nombre o metodología...",className:"w-full px-4 py-3 pl-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})}),e.jsx("div",{className:"relative",children:e.jsxs("select",{value:M,onChange:r=>{q(r.target.value),N(0)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Todas las categorías"}),G.map(r=>e.jsx("option",{value:r,children:r},r))]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors shadow-md",children:"📄 PDF"}),e.jsx("button",{onClick:W,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors shadow-md",children:"📊 Excel"}),e.jsx("button",{onClick:B,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all font-medium shadow-lg transform hover:scale-105",children:"➕ Nuevo Examen"})]})]})}),e.jsx(ee,{open:o,onClose:()=>s(!1),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:l?"✏️":"➕"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:l?"Editar Examen":"Nuevo Examen"}),e.jsx("p",{className:"text-purple-100",children:l?"Modifique los datos del examen":"Complete la información del nuevo examen"})]})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:e.jsxs("form",{onSubmit:J,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nombre del Examen *"}),e.jsx("input",{name:"nombre",value:d.nombre,onChange:v,placeholder:"Ej: Hemograma Completo",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Categoría"}),e.jsx("input",{name:"categoria",value:d.categoria,onChange:v,placeholder:"Ej: Hematología, Química Clínica, Serología, etc.",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Metodología"}),e.jsx("input",{name:"metodologia",value:d.metodologia,onChange:v,placeholder:"Ej: Citometría de flujo",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"🧪 Parámetros y Valores de Referencia"}),e.jsx(se,{initialData:d.valores_referenciales,onChange:U})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"👁️ Previsualización del Formato de Resultados"}),e.jsx("div",{className:"bg-white border rounded-lg p-4 overflow-auto max-h-80",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-purple-100 to-indigo-100",children:[e.jsx("th",{className:"p-2 text-left font-semibold",children:"Examen / Parámetro"}),e.jsx("th",{className:"p-2 text-left font-semibold",children:"Metodología"}),e.jsx("th",{className:"p-2 text-left font-semibold",children:"Resultado"}),e.jsx("th",{className:"p-2 text-left font-semibold",children:"Unidades"}),e.jsx("th",{className:"p-2 text-left font-semibold",children:"Valores de Referencia"})]})}),e.jsx("tbody",{children:Array.isArray(d.valores_referenciales)&&d.valores_referenciales.length>0?d.valores_referenciales.sort((r,a)=>(r.orden||0)-(a.orden||0)).map((r,a)=>r.tipo==="Subtítulo"?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:`py-2 px-2 ${r.negrita?"font-bold":"font-semibold"}`,style:{background:r.color_fondo,color:r.color_texto,fontWeight:r.negrita?"bold":"normal"},children:r.nombre})},a):e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2",style:{background:r.color_fondo,color:r.color_texto,fontWeight:r.negrita?"bold":"normal"},children:r.nombre}),e.jsx("td",{className:"py-2 px-2 text-center",children:r.metodologia||""}),e.jsx("td",{className:"py-2 px-2 text-center text-gray-400",children:"[Resultado]"}),e.jsx("td",{className:"py-2 px-2 text-center",children:r.unidad||""}),e.jsx("td",{className:"py-2 px-2 text-center",children:r.referencias&&r.referencias.length>0?e.jsx("ul",{className:"list-none p-0 m-0",children:r.referencias.map((n,u)=>e.jsxs("li",{children:[e.jsxs("span",{className:"text-gray-700",children:[n.valor||"",(n.valor_min||n.valor_max)&&e.jsxs(e.Fragment,{children:[" ","(",n.valor_min?n.valor_min:"-"," ","-"," ",n.valor_max?n.valor_max:"-",")"]})]}),n.desc&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",n.desc,")"]})]},u))}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},a)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center text-gray-400 py-4",children:"Sin parámetros definidos"})})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"💰 Precio Público (S/)"}),e.jsx("input",{name:"precio_publico",value:d.precio_publico,onChange:v,placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",type:"number",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"🏥 Precio Convenio (S/)"}),e.jsx("input",{name:"precio_convenio",value:d.precio_convenio,onChange:v,placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",type:"number",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"🧪 Tipo de Tubo"}),e.jsx("input",{name:"tipo_tubo",value:d.tipo_tubo,onChange:v,placeholder:"Ej: Tubo con EDTA",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"🧪 Tipo de Frasco"}),e.jsx("input",{name:"tipo_frasco",value:d.tipo_frasco,onChange:v,placeholder:"Ej: Frasco estéril",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"⏱️ Tiempo de Resultado"}),e.jsx("input",{name:"tiempo_resultado",value:d.tiempo_resultado,onChange:v,placeholder:"Ej: 2-4 horas",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"👤 Condición del Paciente"}),e.jsx("input",{name:"condicion_paciente",value:d.condicion_paciente,onChange:v,placeholder:"Ej: Ayuno 12h",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"📋 Preanalítica"}),e.jsx("input",{name:"preanalitica",value:d.preanalitica,onChange:v,placeholder:"Condiciones especiales",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{i(null),t({nombre:"",metodologia:"",valores_referenciales:[{tipo:"Parámetro",nombre:"",metodologia:"",unidad:"",referencias:[],formula:""}],precio_publico:"",precio_convenio:"",tipo_tubo:"",tipo_frasco:"",tiempo_resultado:"",condicion_paciente:"",preanalitica:""}),s(!1)},className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium border border-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all font-medium shadow-lg hover:shadow-xl transform hover:scale-105",children:l?"💾 Actualizar Examen":"✨ Crear Examen"})]})]})})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Vista:"}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>m("table"),className:`px-3 py-1 rounded-md text-sm transition-colors ${g==="table"?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"📊 Tabla"}),e.jsx("button",{onClick:()=>m("cards"),className:`px-3 py-1 rounded-md text-sm transition-colors ${g==="cards"?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"🗃️ Tarjetas"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Por página:"}),e.jsxs("select",{value:y,onChange:r=>{b(Number(r.target.value)),N(0)},className:"border border-gray-300 rounded-lg px-3 py-1 text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[R.length," de ",_.length," exámenes"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{disabled:h===0,onClick:()=>N(r=>Math.max(0,r-1)),className:"px-3 py-1 rounded-lg bg-gray-100 disabled:opacity-50 hover:bg-gray-200 transition-colors",children:"←"}),e.jsxs("span",{className:"px-3 py-1 text-sm",children:[h+1," / ",F||1]}),e.jsx("button",{disabled:h>=F-1,onClick:()=>N(r=>Math.min(F-1,r+1)),className:"px-3 py-1 rounded-lg bg-gray-100 disabled:opacity-50 hover:bg-gray-200 transition-colors",children:"→"})]})]})]})]}),T?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsxs("div",{className:"flex items-center gap-3 text-purple-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"text-lg",children:"Cargando exámenes de laboratorio..."})]})}):c.length===0?e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔬"}),e.jsx("p",{className:"text-gray-600 text-lg mb-4",children:"No hay exámenes registrados"}),e.jsx("button",{onClick:B,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all font-medium shadow-lg transform hover:scale-105",children:"➕ Crear Primer Examen"})]}):_.length===0?e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No se encontraron exámenes con los filtros aplicados"})]}):e.jsxs(e.Fragment,{children:[g==="table"&&e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Nombre"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium hidden md:table-cell",children:"Metodología"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium hidden md:table-cell",children:"Categoría"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium hidden lg:table-cell",children:"Tubo/Frasco"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium hidden lg:table-cell",children:"Tiempo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Precios"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Acciones"})]})}),e.jsx("tbody",{children:R.map(r=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-purple-50/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center text-purple-600 text-sm",children:"🧪"}),e.jsxs("div",{children:[r.titulo&&e.jsx("div",{className:`text-sm ${r.es_subtitulo?"font-bold text-gray-900":"font-semibold text-gray-700"}`,children:r.titulo}),e.jsx("div",{className:"font-medium text-gray-900",children:r.nombre})]})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 hidden md:table-cell",children:r.metodologia}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 hidden md:table-cell",children:r.categoria||e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 hidden lg:table-cell",children:e.jsxs("div",{className:"space-y-1",children:[r.tipo_tubo&&e.jsxs("div",{children:["📍 ",r.tipo_tubo]}),r.tipo_frasco&&e.jsxs("div",{children:["🧪 ",r.tipo_frasco]})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 hidden lg:table-cell",children:e.jsxs("div",{className:"space-y-1",children:[r.tiempo_resultado&&e.jsxs("div",{children:["⏱️ ",r.tiempo_resultado]}),r.condicion_paciente&&e.jsxs("div",{children:["👤 ",r.condicion_paciente]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Público:"}),e.jsxs("span",{className:"font-semibold text-green-600 ml-1",children:["S/ ",r.precio_publico]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Convenio:"}),e.jsxs("span",{className:"font-semibold text-blue-600 ml-1",children:["S/ ",r.precio_convenio]})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>V(r),className:"px-3 py-1.5 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors text-sm font-medium shadow-md",children:"✏️ Editar"}),e.jsx("button",{onClick:()=>H(r.id),className:"px-3 py-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium shadow-md",children:"🗑️ Eliminar"})]})})]},r.id))})]})})}),g==="cards"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(r=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-6 hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center text-purple-600",children:"🧪"}),e.jsx("div",{className:"text-lg font-bold text-gray-900 line-clamp-1",children:r.nombre})]})}),e.jsxs("div",{className:"space-y-3",children:[r.titulo&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Título"}),e.jsx("p",{className:`text-sm ${r.es_subtitulo?"font-bold text-gray-900":"font-semibold text-gray-700"}`,children:r.titulo})]}),r.categoria&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Categoría"}),e.jsx("p",{className:"text-sm text-gray-700",children:r.categoria})]}),r.metodologia&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Metodología"}),e.jsx("p",{className:"text-sm text-gray-700",children:r.metodologia})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Precio Público"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["S/ ",r.precio_publico]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Precio Convenio"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["S/ ",r.precio_convenio]})]})]}),(r.tipo_tubo||r.tipo_frasco)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Muestras"}),e.jsxs("div",{className:"space-y-1",children:[r.tipo_tubo&&e.jsxs("p",{className:"text-sm text-gray-700",children:["📍 ",r.tipo_tubo]}),r.tipo_frasco&&e.jsxs("p",{className:"text-sm text-gray-700",children:["🧪 ",r.tipo_frasco]})]})]}),(r.tiempo_resultado||r.condicion_paciente)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Información"}),e.jsxs("div",{className:"space-y-1",children:[r.tiempo_resultado&&e.jsxs("p",{className:"text-sm text-gray-700",children:["⏱️ ",r.tiempo_resultado]}),r.condicion_paciente&&e.jsxs("p",{className:"text-sm text-gray-700",children:["👤 ",r.condicion_paciente]})]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:()=>V(r),className:"flex-1 bg-gradient-to-r from-amber-500 to-orange-500 text-white py-2.5 px-4 rounded-lg hover:from-amber-600 hover:to-orange-600 transition-all font-medium text-sm shadow-md",children:"✏️ Editar"}),e.jsx("button",{onClick:()=>H(r.id),className:"flex-1 bg-gradient-to-r from-red-500 to-pink-500 text-white py-2.5 px-4 rounded-lg hover:from-red-600 hover:to-pink-600 transition-all font-medium text-sm shadow-md",children:"🗑️ Eliminar"})]})]},r.id))})]})]})]})}export{$ as B,te as E};
