import{j as e,r as x,u as z,b as H,s as D,t as W}from"./vendor-B5yQt2qK.js";import{B as y}from"./examenes-laboratorio-crud-BJk1fG4Z.js";function V({hc:s,setHc:a}){return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 mt-4",children:"Anamnesis"}),e.jsxs("div",{className:"mb-2 flex flex-col md:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Tiempo de Enfermedad:"}),e.jsx("textarea",{className:"w-full border rounded p-1",rows:2,value:s.tiempo_enfermedad,onChange:r=>a(o=>({...o,tiempo_enfermedad:r.target.value}))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Forma de inicio:"}),e.jsx("textarea",{className:"w-full border rounded p-1",rows:2,value:s.forma_inicio,onChange:r=>a(o=>({...o,forma_inicio:r.target.value}))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Curso:"}),e.jsx("textarea",{className:"w-full border rounded p-1",rows:2,value:s.curso,onChange:r=>a(o=>({...o,curso:r.target.value}))})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Descripci√≥n general del cuadro actual:"}),e.jsx("textarea",{className:"w-full border rounded p-1",rows:2,value:s.descripcion_general||"",onChange:r=>a(o=>({...o,descripcion_general:r.target.value}))})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2 mt-4",children:"Antecedentes"}),e.jsx("div",{className:"mb-2",children:e.jsx("textarea",{className:"w-full border rounded p-1",rows:2,value:s.antecedentes,onChange:r=>a(o=>({...o,antecedentes:r.target.value}))})}),e.jsx("h3",{className:"text-lg font-semibold mb-2 mt-4",children:"Examen F√≠sico"}),e.jsx("div",{className:"mb-2",children:e.jsx("textarea",{className:"w-full border rounded p-1",rows:2,value:s.examen_fisico,onChange:r=>a(o=>({...o,examen_fisico:r.target.value}))})})]})}function G({triaje:s}){return s?e.jsxs("div",{className:"space-y-4",children:[s.motivo&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"üìã Motivo de Consulta"}),e.jsx("p",{className:"text-blue-800 leading-relaxed",children:s.motivo})]})]})}),s.sintomas&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"ü©∫ S√≠ntomas Principales"}),e.jsx("p",{className:"text-orange-800 leading-relaxed",children:s.sintomas})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"‚ù§Ô∏è Signos Vitales"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[s.presion_arterial&&e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border",children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium uppercase",children:"Presi√≥n Arterial"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:s.presion_arterial}),e.jsx("div",{className:"text-xs text-gray-400",children:"mmHg"})]}),s.frecuencia_cardiaca&&e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border",children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium uppercase",children:"Freq. Card√≠aca"}),e.jsx("div",{className:"text-lg font-bold text-pink-600",children:s.frecuencia_cardiaca}),e.jsx("div",{className:"text-xs text-gray-400",children:"lpm"})]}),s.frecuencia_respiratoria&&e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border",children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium uppercase",children:"Freq. Respiratoria"}),e.jsx("div",{className:"text-lg font-bold text-blue-600",children:s.frecuencia_respiratoria}),e.jsx("div",{className:"text-xs text-gray-400",children:"rpm"})]}),s.temperatura&&e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border",children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium uppercase",children:"Temperatura"}),e.jsx("div",{className:"text-lg font-bold text-orange-600",children:s.temperatura}),e.jsx("div",{className:"text-xs text-gray-400",children:"¬∞C"})]}),s.saturacion&&e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border",children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium uppercase",children:"Sat. O‚ÇÇ"}),e.jsx("div",{className:"text-lg font-bold text-cyan-600",children:s.saturacion}),e.jsx("div",{className:"text-xs text-gray-400",children:"%"})]}),s.peso&&e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border",children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium uppercase",children:"Peso"}),e.jsx("div",{className:"text-lg font-bold text-purple-600",children:s.peso}),e.jsx("div",{className:"text-xs text-gray-400",children:"kg"})]}),s.talla&&e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border",children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium uppercase",children:"Talla"}),e.jsx("div",{className:"text-lg font-bold text-indigo-600",children:s.talla}),e.jsx("div",{className:"text-xs text-gray-400",children:"cm"})]}),s.peso&&s.talla&&e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg p-3 shadow-sm border border-emerald-200",children:[e.jsx("div",{className:"text-xs text-emerald-700 font-medium uppercase",children:"IMC"}),e.jsx("div",{className:"text-lg font-bold text-emerald-600",children:(parseFloat(s.peso)/Math.pow(parseFloat(s.talla)/100,2)).toFixed(1)}),e.jsx("div",{className:"text-xs text-emerald-500",children:"kg/m¬≤"})]})]})]}),(s.nivel_conciencia||s.hidratacion||s.coloracion)&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"üë§ Estado General"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.nivel_conciencia&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Conciencia:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.nivel_conciencia==="Alerta"?"bg-green-100 text-green-800":s.nivel_conciencia==="Somnoliento"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.nivel_conciencia})]}),s.hidratacion&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Hidrataci√≥n:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.hidratacion==="Normal"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:s.hidratacion})]}),s.coloracion&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Coloraci√≥n:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.coloracion==="Normal"?"bg-green-100 text-green-800":s.coloracion==="Cianosis"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.coloracion})]})]})]})]}):e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow-700",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"font-medium",children:"No hay datos de triaje registrados"})]}),e.jsx("p",{className:"text-sm text-yellow-600 mt-2",children:"El triaje debe ser realizado por el personal de enfermer√≠a"})]})}function q({paciente:s}){return s?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-2 mb-4",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Nombre:"})," ",s.nombre," ",s.apellido]}),e.jsxs("div",{children:[e.jsx("b",{children:"DNI:"})," ",s.dni]}),e.jsxs("div",{children:[e.jsx("b",{children:"Historia Cl√≠nica:"})," ",s.historia_clinica]}),e.jsxs("div",{children:[e.jsx("b",{children:"Edad:"})," ",s.edad," ",s.edad_unidad]}),e.jsxs("div",{children:[e.jsx("b",{children:"Sexo:"})," ",s.sexo]}),e.jsxs("div",{children:[e.jsx("b",{children:"Direcci√≥n:"})," ",s.direccion]}),e.jsxs("div",{children:[e.jsx("b",{children:"Tel√©fono:"})," ",s.telefono]}),e.jsxs("div",{children:[e.jsx("b",{children:"Email:"})," ",s.email]})]}):null}function U({receta:s,setReceta:a}){const r=Array.isArray(s)?s:[],[o,p]=x.useState(""),[u,c]=x.useState([]),[d,h]=x.useState(!1),[i,g]=x.useState(null),[b,n]=x.useState({dosis:"",frecuencia:"",duracion:"",observaciones:""});x.useEffect(()=>{if(o.length<2){c([]);return}h(!0),fetch(`${y}api_medicamentos.php?busqueda=${encodeURIComponent(o)}`,{credentials:"include"}).then(t=>t.json()).then(t=>c(t)).finally(()=>h(!1))},[o]);const j=()=>{if(!i)return;const t={codigo:i.codigo,nombre:i.nombre,dosis:b.dosis,frecuencia:b.frecuencia,duracion:b.duracion,observaciones:b.observaciones};a(m=>[t,...m]),g(null),n({dosis:"",frecuencia:"",duracion:"",observaciones:""}),p(""),c([])},N=t=>{a(m=>m.filter(f=>f.codigo!==t))};return e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 mt-4",children:"Receta m√©dica"}),e.jsxs("div",{className:"mb-2 flex flex-col sm:flex-row gap-2 items-stretch",children:[e.jsx("input",{type:"text",className:"border rounded p-1 flex-1",placeholder:"Buscar medicamento por nombre o c√≥digo",value:o,onChange:t=>{p(t.target.value),g(null)}}),d&&e.jsx("span",{className:"text-xs text-gray-500",children:"Buscando..."})]}),u.length>0&&!i&&e.jsx("div",{className:"border rounded bg-white shadow max-h-40 overflow-y-auto mb-2",children:u.map(t=>e.jsxs("div",{className:"px-2 py-1 hover:bg-blue-100 cursor-pointer text-sm",onClick:()=>g(t),children:[t.nombre," ",e.jsxs("span",{className:"text-gray-500",children:["(",t.codigo,")"]})]},t.codigo))}),i&&e.jsxs("div",{className:"border rounded p-2 bg-blue-50 mb-2",children:[e.jsxs("div",{className:"font-semibold mb-1",children:[i.nombre," ",e.jsxs("span",{className:"text-gray-500",children:["(",i.codigo,")"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-1",children:[e.jsx("input",{type:"text",className:"border rounded p-1 flex-1",placeholder:"Dosis (ej: 500mg)",value:b.dosis,onChange:t=>n(m=>({...m,dosis:t.target.value}))}),e.jsx("input",{type:"text",className:"border rounded p-1 flex-1",placeholder:"Frecuencia (ej: cada 8h)",value:b.frecuencia,onChange:t=>n(m=>({...m,frecuencia:t.target.value}))}),e.jsx("input",{type:"text",className:"border rounded p-1 flex-1",placeholder:"Duraci√≥n (ej: 5 d√≠as)",value:b.duracion,onChange:t=>n(m=>({...m,duracion:t.target.value}))})]}),e.jsx("textarea",{className:"border rounded p-1 w-full mb-2",placeholder:"Observaciones",value:b.observaciones,onChange:t=>n(m=>({...m,observaciones:t.target.value})),rows:2}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:"bg-blue-600 text-white px-3 py-1 rounded",onClick:j,children:"Agregar a receta"}),e.jsx("button",{type:"button",className:"bg-gray-400 text-white px-3 py-1 rounded",onClick:()=>g(null),children:"Cancelar"})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Medicamentos seleccionados:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border rounded min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-100",children:[e.jsx("th",{className:"px-2 py-1 whitespace-nowrap",children:"Medicamento"}),e.jsx("th",{className:"px-2 py-1 whitespace-nowrap",children:"Dosis"}),e.jsx("th",{className:"px-2 py-1 whitespace-nowrap",children:"Frecuencia"}),e.jsx("th",{className:"px-2 py-1 whitespace-nowrap",children:"Duraci√≥n"}),e.jsx("th",{className:"px-2 py-1 whitespace-nowrap",children:"Observaciones"}),e.jsx("th",{className:"px-2 py-1 whitespace-nowrap w-16",children:"Quitar"})]})}),e.jsx("tbody",{children:r.length>0?r.map((t,m)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 max-w-xs",children:e.jsxs("div",{className:"truncate",title:`${t.nombre} (${t.codigo})`,children:[t.nombre," ",e.jsxs("span",{className:"text-gray-500",children:["(",t.codigo,")"]})]})}),e.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:t.dosis}),e.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:t.frecuencia}),e.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:t.duracion}),e.jsx("td",{className:"border px-2 py-1 max-w-xs truncate",title:t.observaciones,children:t.observaciones}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("button",{type:"button",className:"text-red-600 hover:text-red-800 bg-red-100 hover:bg-red-200 rounded px-2 py-1 text-xs font-medium transition-colors",onClick:()=>N(t.codigo),title:"Eliminar medicamento",children:"‚úï"})})]},t.codigo+m)):e.jsx("tr",{children:e.jsx("td",{className:"border px-2 py-1 text-center text-gray-500 italic",colSpan:6,children:"No hay medicamentos seleccionados"})})})]})})]})]})}function X({receta:s,setReceta:a,tratamiento:r,setTratamiento:o}){return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 mt-4",children:"Tratamiento"}),e.jsx("div",{className:"mb-2",children:e.jsx("textarea",{className:"w-full border rounded p-1",rows:2,placeholder:"Indicaci√≥n general, reposo, dieta, fisioterapia, etc.",value:r||"",onChange:p=>o(p.target.value)})}),e.jsx(U,{receta:s,setReceta:a})]})}function Y({consultaId:s,resultadosLab:a,ordenesLab:r=[]}){const[o,p]=x.useState("laboratorio"),[u,c]=x.useState([]),d=z();x.useEffect(()=>{fetch(`${y}/api_examenes_laboratorio.php`,{credentials:"include"}).then(i=>i.json()).then(i=>c(i.examenes||[])).catch(i=>console.error("Error al obtener ex√°menes:",i))},[]);const h=H.useMemo(()=>{const i={};for(const g of u)i[g.id]=g.nombre;return i},[u]);return e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>p("laboratorio"),className:`px-2 sm:px-3 py-1 rounded-t text-xs sm:text-sm ${o==="laboratorio"?"bg-blue-600 text-white":"bg-gray-200"}`,children:["üß™ ",e.jsx("span",{className:"hidden sm:inline",children:"Laboratorio"}),e.jsx("span",{className:"sm:hidden",children:"Lab"})]}),e.jsxs("button",{onClick:()=>p("rx"),className:`px-2 sm:px-3 py-1 rounded-t text-xs sm:text-sm ${o==="rx"?"bg-blue-600 text-white":"bg-gray-200"}`,children:["üì∏ ",e.jsx("span",{className:"hidden sm:inline",children:"RX"})]}),e.jsxs("button",{onClick:()=>p("ecografia"),className:`px-2 sm:px-3 py-1 rounded-t text-xs sm:text-sm ${o==="ecografia"?"bg-blue-600 text-white":"bg-gray-200"}`,children:["ü´Ä ",e.jsx("span",{className:"hidden sm:inline",children:"Ecograf√≠a"}),e.jsx("span",{className:"sm:hidden",children:"Eco"})]}),e.jsxs("button",{onClick:()=>p("tomografia"),className:`px-2 sm:px-3 py-1 rounded-t text-xs sm:text-sm ${o==="tomografia"?"bg-blue-600 text-white":"bg-gray-200"}`,children:["üî¨ ",e.jsx("span",{className:"hidden sm:inline",children:"Tomograf√≠a"}),e.jsx("span",{className:"sm:hidden",children:"TAC"})]})]}),e.jsxs("div",{className:"border rounded-b bg-white p-3 overflow-hidden",children:[o==="laboratorio"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"mb-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",onClick:()=>d(`/solicitud-laboratorio/${s}`),children:"Solicitar an√°lisis de laboratorio"}),(!r||r.length===0)&&e.jsx("div",{className:"mb-3 p-2 bg-gray-50 border border-gray-200 rounded text-gray-600",children:"No hay ex√°menes solicitados para esta consulta."}),r&&r.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-yellow-50 border border-yellow-300 rounded",children:[e.jsx("div",{className:"font-semibold text-yellow-800 mb-1",children:"Ex√°menes solicitados:"}),r.map((i,g)=>e.jsxs("ul",{className:"list-disc ml-5 text-sm",children:[Array.isArray(i.examenes)&&i.examenes.length>0?i.examenes.map((b,n)=>typeof b=="string"||typeof b=="number"?e.jsx("li",{children:h[b]||b},n):e.jsx("li",{children:b.nombre||h[b.id]||JSON.stringify(b)},n)):e.jsx("li",{className:"text-gray-500",children:"Sin detalles de ex√°menes"}),e.jsxs("li",{className:"text-xs text-gray-500",children:["Estado: ",i.estado||"pendiente"]})]},i.id||g)),(!a||a.length===0||a.every(i=>!i.resultados||typeof i.resultados=="object"&&Object.keys(i.resultados).length===0||typeof i.resultados=="string"&&i.resultados.trim()===""))&&e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"A√∫n no hay resultados disponibles."})]}),a&&a.length>0&&a.some(i=>i.resultados&&(typeof i.resultados=="object"&&Object.keys(i.resultados).length>0||typeof i.resultados=="string"&&i.resultados.trim()!==""))&&e.jsxs("div",{className:"mb-6 p-3 sm:p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-green-800",children:"Resultados Disponibles"}),e.jsx("p",{className:"text-xs sm:text-sm text-green-600",children:"Los resultados de laboratorio ya est√°n listos"})]})]}),e.jsxs("button",{className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl font-semibold transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl text-sm sm:text-base",onClick:()=>d(`/resultados-laboratorio/${s}`),children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"üìã Ver Resultados de Laboratorio"}),e.jsx("span",{className:"sm:hidden",children:"üìã Ver Resultados"}),e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),o==="rx"&&e.jsx("div",{className:"text-gray-500",children:"(Pr√≥ximamente: solicitud y resultados de Rayos X)"}),o==="ecografia"&&e.jsx("div",{className:"text-gray-500",children:"(Pr√≥ximamente: solicitud y resultados de Ecograf√≠a)"}),o==="tomografia"&&e.jsx("div",{className:"text-gray-500",children:"(Pr√≥ximamente: solicitud y resultados de Tomograf√≠a)"})]})]})}function J({diagnosticos:s,setDiagnosticos:a}){const[r,o]=x.useState(""),[p,u]=x.useState([]),[c,d]=x.useState(null),[h,i]=x.useState({tipo:"principal",observaciones:""}),[g,b]=x.useState(!1);x.useEffect(()=>{if(r.length<2){u([]);return}b(!0);const m=setTimeout(async()=>{try{const v=await(await fetch(`http://localhost/clinica-2demayo/api_cie10.php?buscar=${encodeURIComponent(r)}&limite=15`)).json();v.success?u(v.data):u([])}catch{u([])}finally{b(!1)}},300);return()=>clearTimeout(m)},[r]);const n=()=>{c&&(a(t=>[...t,{...c,...h,fecha:new Date().toISOString().slice(0,10)}]),d(null),i({tipo:"secundario",observaciones:""}),o(""),u([]))},j=t=>{a(m=>m.filter(f=>f.codigo!==t))},N=(t,m)=>{a(f=>f.map(v=>v.codigo===t?{...v,tipo:m}:v))};return e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 mt-4",children:"Diagn√≥stico (CIE10)"}),e.jsx("div",{className:"mb-2 flex flex-col sm:flex-row gap-2 items-stretch",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",className:"border rounded p-2 w-full pr-10",placeholder:"Buscar diagn√≥stico por nombre o c√≥digo CIE10...",value:r,onChange:t=>{o(t.target.value),d(null)}}),g&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]})}),r.length>=2&&!g&&p.length===0&&e.jsxs("div",{className:"border rounded bg-yellow-50 p-3 mb-2 text-center",children:[e.jsxs("div",{className:"text-yellow-700",children:['No se encontraron c√≥digos CIE10 para "',r,'"']}),e.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"Intenta con otros t√©rminos o c√≥digos"})]}),p.length>0&&!c&&e.jsx("div",{className:"border rounded bg-white shadow-lg max-h-60 overflow-y-auto mb-2 z-10",children:p.map(t=>e.jsx("div",{className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>d(t),children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm text-gray-900",children:t.nombre}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[e.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded mr-2",children:t.codigo}),t.categoria&&e.jsx("span",{className:"text-blue-600",children:t.categoria}),t.subcategoria&&e.jsxs("span",{className:"text-gray-500",children:[" ‚Ä¢ ",t.subcategoria]})]}),t.descripcion&&e.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:t.descripcion})]})})},t.id))}),c&&e.jsxs("div",{className:"border rounded p-3 bg-blue-50 mb-2",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"font-semibold text-lg",children:c.nombre}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("span",{className:"font-mono bg-blue-100 px-2 py-1 rounded mr-2",children:c.codigo}),c.categoria&&e.jsx("span",{className:"text-blue-600",children:c.categoria}),c.subcategoria&&e.jsxs("span",{className:"text-gray-500",children:[" ‚Ä¢ ",c.subcategoria]})]}),c.descripcion&&e.jsx("div",{className:"text-sm text-gray-700 mt-2 p-2 bg-white rounded border-l-4 border-blue-400",children:c.descripcion})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-1",children:[e.jsxs("select",{className:"border rounded p-1",value:h.tipo,onChange:t=>i(m=>({...m,tipo:t.target.value})),children:[e.jsx("option",{value:"principal",children:"Principal"}),e.jsx("option",{value:"secundario",children:"Secundario"})]}),e.jsx("input",{type:"text",className:"border rounded p-1 flex-1",placeholder:"Observaciones",value:h.observaciones,onChange:t=>i(m=>({...m,observaciones:t.target.value}))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:"bg-blue-600 text-white px-3 py-1 rounded",onClick:n,children:"Agregar diagn√≥stico"}),e.jsx("button",{type:"button",className:"bg-gray-400 text-white px-3 py-1 rounded",onClick:()=>d(null),children:"Cancelar"})]})]}),s.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Diagn√≥sticos agregados:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border rounded min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-100",children:[e.jsx("th",{className:"px-2 py-1 whitespace-nowrap",children:"C√≥digo"}),e.jsx("th",{className:"px-2 py-1 whitespace-nowrap",children:"Nombre"}),e.jsx("th",{className:"px-2 py-1 whitespace-nowrap",children:"Tipo"}),e.jsx("th",{className:"px-2 py-1 whitespace-nowrap",children:"Observaciones"}),e.jsx("th",{className:"px-2 py-1 whitespace-nowrap",children:"Fecha"}),e.jsx("th",{className:"px-2 py-1 whitespace-nowrap w-16",children:"Quitar"})]})}),e.jsx("tbody",{children:s.map((t,m)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 font-mono text-xs whitespace-nowrap",children:t.codigo}),e.jsx("td",{className:"border px-2 py-1 max-w-xs truncate",title:t.nombre,children:t.nombre}),e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("select",{className:"border rounded p-1 text-xs w-full min-w-0",value:t.tipo,onChange:f=>N(t.codigo,f.target.value),children:[e.jsx("option",{value:"principal",children:"Principal"}),e.jsx("option",{value:"secundario",children:"Secundario"})]})}),e.jsx("td",{className:"border px-2 py-1 max-w-xs truncate",title:t.observaciones,children:t.observaciones}),e.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:t.fecha}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("button",{type:"button",className:"text-red-600 hover:text-red-800 bg-red-100 hover:bg-red-200 rounded px-2 py-1 text-xs font-medium transition-colors",onClick:()=>j(t.codigo),title:"Eliminar diagn√≥stico",children:"‚úï"})})]},t.codigo+m))})]})})]})]})}const Q=({paciente:s,triaje:a,hc:r,diagnosticos:o,medicamentos:p,ordenesLaboratorio:u,medicoInfo:c,configuracionClinica:d})=>{const h=()=>window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"?`${window.location.protocol}//${window.location.host}/2demayo.svg`:"/2demayo.svg",i=n=>n?new Date(n).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"",g=n=>n?new Date(n).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):"",b=({titulo:n,mensaje:j="No hay informaci√≥n registrada"})=>e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-600 mb-2 border-b border-gray-300",children:n}),e.jsx("p",{className:"text-sm text-gray-500 italic text-center p-4",children:j})]});return e.jsxs("div",{className:"bg-white p-8 max-w-4xl mx-auto shadow-lg print:shadow-none print:max-w-none",children:[e.jsx("style",{jsx:!0,children:`
        @media print {
          .firma-medico {
            break-inside: avoid;
            page-break-inside: avoid;
          }
          .firma-imagen {
            print-color-adjust: exact;
            -webkit-print-color-adjust: exact;
          }
        }
      `}),e.jsx("div",{className:"text-center border-b-2 border-blue-600 pb-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-2",children:[e.jsx("img",{src:h(),alt:"Logo Cl√≠nica 2 de Mayo",className:"h-16 w-auto"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-blue-800",children:d?.nombre_clinica||"CL√çNICA 2 DE MAYO"}),e.jsx("p",{className:"text-sm text-gray-600",children:d?.direccion||"Direcci√≥n de la cl√≠nica"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Tel: ",d?.telefono||"123-456-789"," | Email: ",d?.email||"contacto@clinica2demayo.com"]})]})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 border-b border-gray-300 pb-2",children:"üìã HISTORIA CL√çNICA"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[e.jsxs("span",{children:["Fecha: ",i(new Date)]}),e.jsxs("span",{children:["Hora: ",g(new Date)]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 p-4 bg-blue-50 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2 border-b border-blue-200",children:"üë§ DATOS DEL PACIENTE"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",s?.nombres," ",s?.apellidos]}),e.jsxs("p",{children:[e.jsx("strong",{children:"DNI:"})," ",s?.dni]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Edad:"})," ",s?.edad," a√±os"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sexo:"})," ",s?.sexo]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tel√©fono:"})," ",s?.telefono]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2 border-b border-blue-200",children:"ü©∫ INFORMACI√ìN M√âDICA"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"M√©dico:"})," Dr(a). ",c?.nombre," ",c?.apellido]}),e.jsxs("p",{children:[e.jsx("strong",{children:"CMP:"})," ",c?.cmp||"N/A"]}),c?.rne&&e.jsxs("p",{children:[e.jsx("strong",{children:"RNE:"})," ",c.rne]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Especialidad:"})," ",c?.especialidad]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha Consulta:"})," ",i(s?.fecha_consulta)]})]})]})]}),a?.motivo&&e.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("h3",{className:"font-semibold text-yellow-800 mb-2 border-b border-yellow-300",children:"üìù MOTIVO DE CONSULTA"}),e.jsx("p",{className:"text-sm leading-relaxed",children:a.motivo})]}),a&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2 border-b border-green-300",children:"‚ù§Ô∏è SIGNOS VITALES"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[a.presion_arterial&&e.jsxs("div",{children:[e.jsx("strong",{children:"P/A:"})," ",a.presion_arterial," mmHg"]}),a.frecuencia_cardiaca&&e.jsxs("div",{children:[e.jsx("strong",{children:"FC:"})," ",a.frecuencia_cardiaca," lpm"]}),a.frecuencia_respiratoria&&e.jsxs("div",{children:[e.jsx("strong",{children:"FR:"})," ",a.frecuencia_respiratoria," rpm"]}),a.temperatura&&e.jsxs("div",{children:[e.jsx("strong",{children:"T¬∞:"})," ",a.temperatura,"¬∞C"]}),a.saturacion&&e.jsxs("div",{children:[e.jsx("strong",{children:"SpO‚ÇÇ:"})," ",a.saturacion,"%"]}),a.peso&&e.jsxs("div",{children:[e.jsx("strong",{children:"Peso:"})," ",a.peso," kg"]}),a.talla&&e.jsxs("div",{children:[e.jsx("strong",{children:"Talla:"})," ",a.talla," cm"]}),a.peso&&a.talla&&e.jsxs("div",{children:[e.jsx("strong",{children:"IMC:"})," ",(parseFloat(a.peso)/Math.pow(parseFloat(a.talla)/100,2)).toFixed(1)," kg/m¬≤"]})]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h3",{className:"font-semibold text-purple-800 mb-3 border-b border-purple-300",children:"üîç ANAMNESIS"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 text-sm",children:[r.tiempo_enfermedad&&e.jsxs("div",{children:[e.jsx("strong",{children:"Tiempo de Enfermedad:"}),e.jsx("p",{className:"mt-1 p-2 bg-white rounded border",children:r.tiempo_enfermedad})]}),r.forma_inicio&&e.jsxs("div",{children:[e.jsx("strong",{children:"Forma de Inicio:"}),e.jsx("p",{className:"mt-1 p-2 bg-white rounded border",children:r.forma_inicio})]}),r.curso&&e.jsxs("div",{children:[e.jsx("strong",{children:"Curso:"}),e.jsx("p",{className:"mt-1 p-2 bg-white rounded border",children:r.curso})]})]}),r.descripcion_general&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Descripci√≥n General:"}),e.jsx("p",{className:"mt-1 p-2 bg-white rounded border",children:r.descripcion_general})]})]}),r.antecedentes&&e.jsxs("div",{className:"mb-6 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("h3",{className:"font-semibold text-orange-800 mb-2 border-b border-orange-300",children:"üìö ANTECEDENTES"}),e.jsx("p",{className:"text-sm leading-relaxed p-2 bg-white rounded border",children:r.antecedentes})]}),r.examen_fisico&&e.jsxs("div",{className:"mb-6 p-4 bg-teal-50 rounded-lg border border-teal-200",children:[e.jsx("h3",{className:"font-semibold text-teal-800 mb-2 border-b border-teal-300",children:"üî¨ EXAMEN F√çSICO"}),e.jsx("p",{className:"text-sm leading-relaxed p-2 bg-white rounded border",children:r.examen_fisico})]}),o&&o.length>0?e.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg border border-red-200 seccion-diagnosticos",children:[e.jsx("h3",{className:"font-semibold text-red-800 mb-2 border-b border-red-300",children:"üéØ DIAGN√ìSTICOS CIE-10"}),e.jsx("div",{className:"space-y-3",children:o.map((n,j)=>e.jsx("div",{className:"text-sm p-3 bg-white rounded border border-red-100",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"inline-block w-6 h-6 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center flex-shrink-0",children:j+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[e.jsx("span",{className:"inline-block px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded",children:n.tipo||"Principal"}),e.jsx("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-800 text-xs font-mono rounded",children:n.codigo})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 leading-relaxed",children:n.descripcion})]})]})},j))})]}):e.jsx(b,{titulo:"üéØ DIAGN√ìSTICOS CIE-10",mensaje:"No se han registrado diagn√≥sticos para esta consulta"}),r.tratamiento&&e.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsx("h3",{className:"font-semibold text-indigo-800 mb-2 border-b border-indigo-300",children:"üíä PLAN DE TRATAMIENTO"}),e.jsx("p",{className:"text-sm leading-relaxed p-2 bg-white rounded border",children:r.tratamiento})]}),p&&p.length>0?e.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200 seccion-medicamentos",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2 border-b border-green-300",children:"üíâ RECETA M√âDICA"}),e.jsx("div",{className:"space-y-3",children:p.map((n,j)=>e.jsxs("div",{className:"text-sm p-3 bg-white rounded border border-green-100",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Medicamento:"})," ",n.medicamento]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Concentraci√≥n:"})," ",n.concentracion]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Forma Farmac√©utica:"})," ",n.forma_farmaceutica]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Dosis:"})," ",n.dosis]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Frecuencia:"})," ",n.frecuencia]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duraci√≥n:"})," ",n.duracion]})]})]}),n.indicaciones&&e.jsx("div",{className:"mt-2 pt-2 border-t border-green-100",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Indicaciones:"})," ",n.indicaciones]})})]},j))})]}):e.jsx(b,{titulo:"üíâ RECETA M√âDICA",mensaje:"No se han prescrito medicamentos para esta consulta"}),u&&u.length>0?e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200 seccion-laboratorio",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2 border-b border-blue-300",children:"üî¨ EX√ÅMENES DE LABORATORIO SOLICITADOS"}),e.jsx("div",{className:"space-y-3",children:u.map((n,j)=>e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-semibold rounded",children:["Orden #",n.id||j+1]}),e.jsx("span",{className:"text-xs text-gray-500",children:i(n.fecha_solicitud)})]}),n.examenes&&n.examenes.length>0?e.jsx("div",{className:"space-y-2",children:n.examenes.map((N,t)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-blue-50 rounded border-l-4 border-blue-300",children:[e.jsx("span",{className:"w-5 h-5 bg-blue-500 text-white text-xs font-bold rounded-full flex items-center justify-center flex-shrink-0",children:t+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:N.nombre}),N.descripcion&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:N.descripcion}),N.condicion_paciente&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[e.jsx("strong",{children:"Condici√≥n:"})," ",N.condicion_paciente]}),N.tiempo_resultado&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[e.jsx("strong",{children:"Tiempo estimado:"})," ",N.tiempo_resultado]})]}),e.jsx("div",{className:"text-xs",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${n.estado==="pendiente"?"bg-yellow-100 text-yellow-800":n.estado==="completado"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:n.estado||"Pendiente"})})]},t))}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay ex√°menes espec√≠ficos registrados"})]},j))})]}):e.jsx(b,{titulo:"üî¨ EX√ÅMENES DE LABORATORIO SOLICITADOS",mensaje:"No se han solicitado ex√°menes de laboratorio para esta consulta"}),e.jsx("div",{className:"mt-8 pt-4 border-t-2 border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("p",{children:"Documento generado digitalmente"}),e.jsxs("p",{children:["Fecha de impresi√≥n: ",i(new Date)," - ",g(new Date)]})]}),e.jsxs("div",{className:"text-center pie-firma",children:[c?.firma&&e.jsx("div",{className:"mb-4 firma-digital",children:e.jsx("img",{src:c.firma,alt:"Firma digital del m√©dico",className:"mx-auto border border-gray-300 rounded bg-white p-1 firma-img-hc"})}),e.jsxs("div",{className:"border-t-2 border-gray-400 pt-2 min-w-[200px]",children:[e.jsxs("p",{className:"font-semibold text-sm",children:["Dr(a). ",c?.nombre," ",c?.apellido]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["CMP: ",c?.cmp||"N/A"]}),c?.rne&&e.jsxs("p",{className:"text-xs text-gray-600",children:["RNE: ",c.rne]}),e.jsx("p",{className:"text-xs text-gray-600",children:c?.especialidad}),!c?.firma&&e.jsx("div",{className:"mt-2 mb-4 h-16 flex items-center justify-center border border-dashed border-gray-300 text-xs text-gray-400",children:"[Espacio para firma manual]"})]})]})]})})]})},K=({paciente:s,ordenesLaboratorio:a,medicoInfo:r,configuracionClinica:o})=>{const p=()=>window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"?`${window.location.protocol}//${window.location.host}/2demayo.svg`:"/2demayo.svg",u=d=>d?new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"",c=d=>d?new Date(d).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):"";return e.jsxs("div",{className:"bg-white max-w-2xl mx-auto print:shadow-none print:max-w-none",style:{minHeight:"210mm",maxWidth:"148mm",padding:"10mm",fontFamily:"Arial, sans-serif",fontSize:"12px"},children:[e.jsxs("div",{className:"border-2 border-black p-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-black pb-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:p(),alt:"Logo Cl√≠nica 2 de Mayo",className:"h-10 w-auto"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-black uppercase leading-tight",children:o?.nombre_clinica||"CL√çNICA 2 DE MAYO"}),e.jsx("p",{className:"text-xs text-black",children:o?.direccion||"Direcci√≥n de la cl√≠nica"}),e.jsxs("p",{className:"text-xs text-black",children:["Tel: ",o?.telefono||"123-456-789"]}),o?.ruc&&e.jsxs("p",{className:"text-xs text-black",children:["RUC: ",o.ruc]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("h2",{className:"text-sm font-bold text-black leading-tight",children:["Dr(a). ",r?.nombre," ",r?.apellido]}),e.jsx("p",{className:"text-xs text-black",children:r?.especialidad}),e.jsxs("p",{className:"text-xs text-black",children:["CMP: ",r?.cmp||"N/A"]}),r?.rne&&e.jsxs("p",{className:"text-xs text-black",children:["RNE: ",r.rne]})]})]}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("h2",{className:"text-lg font-bold text-black border-b border-black pb-1",children:"üìã ORDEN DE LABORATORIO"}),e.jsxs("div",{className:"flex justify-between text-xs text-black mt-1",children:[e.jsxs("span",{children:["Fecha: ",u(new Date)]}),e.jsxs("span",{children:["Hora: ",c(new Date)]})]})]})]}),e.jsxs("div",{className:"border border-black p-2 mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-black mb-2 border-b border-black pb-1",children:"üë§ DATOS DEL PACIENTE"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"Paciente:"})," ",s?.nombres," ",s?.apellidos]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"DNI:"})," ",s?.dni]}),e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"Edad:"})," ",s?.edad," a√±os"]}),e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"Sexo:"})," ",s?.sexo]})]})]})]}),e.jsxs("div",{className:"border border-black p-2 mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-black mb-2 border-b border-black pb-1",children:"üî¨ EX√ÅMENES SOLICITADOS"}),a&&a.length>0?e.jsx("div",{className:"space-y-2",children:a.map((d,h)=>e.jsxs("div",{className:"border border-gray-300 p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"font-bold text-black text-xs bg-blue-200 px-1 rounded",children:["#",h+1]}),e.jsxs("span",{className:"text-xs text-black",children:["Solicitud: ",u(d.fecha_solicitud)]})]}),d.examenes&&d.examenes.length>0?e.jsx("ul",{className:"list-disc pl-5 text-xs text-black",children:d.examenes.map((i,g)=>e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:i.nombre}),i.condicion_paciente&&e.jsxs("span",{className:"ml-2 bg-yellow-100 px-1 rounded border",children:["‚ö†Ô∏è ",i.condicion_paciente]}),i.tiempo_resultado&&e.jsxs("span",{className:"ml-2 bg-blue-100 px-1 rounded border",children:["‚è±Ô∏è ",i.tiempo_resultado]})]},g))}):e.jsx("p",{className:"text-xs text-black",children:"Sin detalles disponibles"})]},h))}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{className:"text-xs",children:"No hay √≥rdenes de laboratorio"})})]}),e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs("div",{className:"border border-black p-2",children:[e.jsx("h3",{className:"text-xs font-bold text-black mb-1",children:"üìù INSTRUCCIONES"}),e.jsxs("div",{className:"text-xs text-black space-y-1",children:[e.jsx("p",{children:"‚Ä¢ Presentar DNI original"}),e.jsx("p",{children:"‚Ä¢ Seguir preparaci√≥n espec√≠fica"}),e.jsx("p",{children:"‚Ä¢ Resultados seg√∫n tiempo indicado"})]})]})}),e.jsx("div",{className:"border-t border-black pt-3 mt-4",children:e.jsxs("div",{className:"flex justify-between items-end text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-16 border border-dashed border-gray-400 flex items-center justify-center mb-1",children:e.jsxs("span",{className:"text-xs text-gray-500 text-center leading-tight",children:["SELLO",e.jsx("br",{}),"LAB"]})}),e.jsx("p",{className:"text-xs text-black font-bold",children:"PROCESADO"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["Emitido: ",u(new Date)]}),e.jsx("p",{className:"text-xs text-gray-600",children:"V√°lido 15 d√≠as"})]}),e.jsxs("div",{className:"text-center",children:[r?.firma&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:r.firma,alt:"Firma digital del m√©dico",className:"mx-auto border border-gray-300 rounded bg-white p-1 firma-img-lab"})}),e.jsxs("div",{className:"border-t border-black pt-1 min-w-24",children:[e.jsxs("p",{className:"font-bold text-black text-xs",children:["Dr(a). ",r?.nombre," ",r?.apellido]}),e.jsxs("p",{className:"text-xs text-black",children:["CMP: ",r?.cmp||"N/A"]}),r?.rne&&e.jsxs("p",{className:"text-xs text-black",children:["RNE: ",r.rne]}),e.jsx("p",{className:"text-xs text-black",children:r?.especialidad}),!r?.firma&&e.jsx("div",{className:"mt-1 mb-2 h-8 flex items-center justify-center border border-dashed border-gray-400 text-xs text-gray-500",children:"[Firma Manual]"}),e.jsx("p",{className:"text-xs text-black font-bold",children:"FIRMA M√âDICO"})]})]})]})})]})},Z=({paciente:s,medicamentos:a,medicoInfo:r,configuracionClinica:o})=>{const p=()=>window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"?`${window.location.protocol}//${window.location.host}/2demayo.svg`:"/2demayo.svg",u=d=>d?new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"",c=d=>d?new Date(d).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):"";return e.jsxs("div",{className:"bg-white max-w-2xl mx-auto print:shadow-none print:max-w-none",style:{minHeight:"210mm",maxWidth:"148mm",padding:"10mm",fontFamily:"Arial, sans-serif",fontSize:"12px"},children:[e.jsxs("div",{className:"border-2 border-black p-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-black pb-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:p(),alt:"Logo Cl√≠nica 2 de Mayo",className:"h-10 w-auto"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-black uppercase leading-tight",children:o?.nombre_clinica||"CL√çNICA 2 DE MAYO"}),e.jsx("p",{className:"text-xs text-black",children:o?.direccion||"Direcci√≥n de la cl√≠nica"}),e.jsxs("p",{className:"text-xs text-black",children:["Tel: ",o?.telefono||"123-456-789"]}),o?.ruc&&e.jsxs("p",{className:"text-xs text-black",children:["RUC: ",o.ruc]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("h2",{className:"text-sm font-bold text-black leading-tight",children:["Dr(a). ",r?.nombre," ",r?.apellido]}),e.jsx("p",{className:"text-xs text-black",children:r?.especialidad}),e.jsxs("p",{className:"text-xs text-black",children:["CMP: ",r?.cmp||"N/A"]}),r?.rne&&e.jsxs("p",{className:"text-xs text-black",children:["RNE: ",r.rne]})]})]}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("h2",{className:"text-lg font-bold text-black border-b border-black pb-1",children:"üíä RECETA M√âDICA"}),e.jsxs("div",{className:"flex justify-between text-xs text-black mt-1",children:[e.jsxs("span",{children:["Fecha: ",u(new Date)]}),e.jsxs("span",{children:["Hora: ",c(new Date)]})]})]})]}),e.jsxs("div",{className:"border border-black p-2 mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-black mb-2 border-b border-black pb-1",children:"üë§ DATOS DEL PACIENTE"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"Paciente:"})," ",s?.nombres," ",s?.apellidos]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"DNI:"})," ",s?.dni]}),e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"Edad:"})," ",s?.edad," a√±os"]}),e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"Sexo:"})," ",s?.sexo]})]})]})]}),e.jsxs("div",{className:"border border-black p-2 mb-3",style:{minHeight:"80px"},children:[e.jsx("h3",{className:"text-sm font-bold text-black mb-2 border-b border-black pb-1",children:"üíä MEDICAMENTOS PRESCRITOS"}),a&&a.length>0?e.jsx("ul",{className:"list-disc pl-5 text-xs text-black space-y-1",children:a.map((d,h)=>e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold uppercase",children:d.nombre||"Medicamento no especificado"}),d.dosis&&e.jsxs("span",{className:"ml-2",children:[e.jsx("strong",{children:"Dosis:"})," ",d.dosis]}),d.frecuencia&&e.jsxs("span",{className:"ml-2",children:[e.jsx("strong",{children:"Frecuencia:"})," ",d.frecuencia]}),d.duracion&&e.jsxs("span",{className:"ml-2",children:[e.jsx("strong",{children:"Duraci√≥n:"})," ",d.duracion]}),d.observaciones&&e.jsxs("span",{className:"ml-2 italic",children:[e.jsx("strong",{children:"Obs:"})," ",d.observaciones]})]},h))}):e.jsx("p",{className:"text-xs text-black italic text-center py-4",children:"No se han prescrito medicamentos."})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"border border-black p-2",children:[e.jsx("h3",{className:"text-xs font-bold text-black mb-1",children:"üìã INSTRUCCIONES"}),e.jsxs("div",{className:"text-xs text-black space-y-1",children:[e.jsx("p",{children:"‚Ä¢ Tomar seg√∫n indicaci√≥n m√©dica"}),e.jsx("p",{children:"‚Ä¢ Completar tratamiento"}),e.jsx("p",{children:"‚Ä¢ Contactar m√©dico si efectos adversos"})]})]}),e.jsxs("div",{className:"border border-red-500 bg-red-50 p-2",children:[e.jsx("h3",{className:"text-xs font-bold text-red-800 mb-1",children:"‚ö†Ô∏è ADVERTENCIAS"}),e.jsx("p",{className:"text-xs text-red-800",children:"‚Ä¢ Receta personal e intransferible ‚Ä¢ Fuera del alcance de ni√±os"})]})]}),e.jsx("div",{className:"border-t border-black pt-3 mt-4",children:e.jsxs("div",{className:"flex justify-between items-end text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-16 border border-dashed border-gray-400 flex items-center justify-center mb-1",children:e.jsxs("span",{className:"text-xs text-gray-500 text-center leading-tight",children:["SELLO",e.jsx("br",{}),"FARMACIA"]})}),e.jsx("p",{className:"text-xs text-black font-bold",children:"DESPACHADO"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["Emitido: ",u(new Date)]}),e.jsx("p",{className:"text-xs text-gray-600",children:"V√°lido 30 d√≠as"})]}),e.jsxs("div",{className:"text-center",children:[r?.firma&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:r.firma,alt:"Firma digital del m√©dico",className:"mx-auto border border-gray-300 rounded bg-white p-1 firma-img-receta"})}),e.jsxs("div",{className:"border-t border-black pt-1 min-w-24",children:[e.jsxs("p",{className:"font-bold text-black text-xs",children:["Dr(a). ",r?.nombre," ",r?.apellido]}),e.jsxs("p",{className:"text-xs text-black",children:["CMP: ",r?.cmp||"N/A"]}),r?.rne&&e.jsxs("p",{className:"text-xs text-black",children:["RNE: ",r.rne]}),e.jsx("p",{className:"text-xs text-black",children:r?.especialidad}),!r?.firma&&e.jsx("div",{className:"mt-1 mb-2 h-8 flex items-center justify-center border border-dashed border-gray-400 text-xs text-gray-500",children:"[Firma Manual]"}),e.jsx("p",{className:"text-xs text-black font-bold",children:"FIRMA M√âDICO"})]})]})]})})]})},ee=()=>{const s=x.useRef(),a=D.useReactToPrint({contentRef:s,documentTitle:"Historia Cl√≠nica",onBeforeGetContent:x.useCallback(()=>new Promise(r=>{setTimeout(r,100)}),[]),pageStyle:`
      @page {
        size: A4;
        margin: 10mm;
      }
      
      @media print {
        body {
          -webkit-print-color-adjust: exact;
          color-adjust: exact;
        }
        
        .print\\:shadow-none {
          box-shadow: none !important;
        }
        
        .print\\:max-w-none {
          max-width: none !important;
        }
        
        .no-print {
          display: none !important;
        }
        
        /* Colores de fondo para impresi√≥n */
        .bg-blue-50, .bg-yellow-50, .bg-green-50, 
        .bg-purple-50, .bg-orange-50, .bg-teal-50, 
        .bg-red-50, .bg-indigo-50 {
          background-color: #f8f9fa !important;
          border: 1px solid #dee2e6 !important;
        }
        
        /* Asegurar que los bordes se impriman */
        .border, .border-b, .border-t-2 {
          border-color: #6c757d !important;
        }
        
        /* Mejorar legibilidad de texto */
        .text-gray-600, .text-gray-800 {
          color: #333 !important;
        }
      }
    `});return{componentRef:s,handlePrint:a}},se=()=>{const s=x.useRef(),a=D.useReactToPrint({contentRef:s,documentTitle:"Orden de Laboratorio",onBeforeGetContent:x.useCallback(()=>new Promise(r=>{setTimeout(r,100)}),[]),pageStyle:`
      @page {
        size: A4;
        margin: 15mm;
      }
      
      @media print {
        body {
          -webkit-print-color-adjust: exact;
          color-adjust: exact;
          font-family: 'Times New Roman', serif;
        }
        
        .no-print {
          display: none !important;
        }
        
        .print\\:border-black {
          border-color: black !important;
        }
        
        .print\\:text-black {
          color: black !important;
        }
      }
    `});return{componentRef:s,handlePrint:a}},re=()=>{const s=x.useRef(),a=D.useReactToPrint({contentRef:s,documentTitle:"Receta M√©dica",onBeforeGetContent:x.useCallback(()=>new Promise(r=>{setTimeout(r,100)}),[]),pageStyle:`
      @page {
        size: A4;
        margin: 15mm;
      }
      
      @media print {
        body {
          -webkit-print-color-adjust: exact;
          color-adjust: exact;
          font-family: 'Times New Roman', serif;
        }
        
        .no-print {
          display: none !important;
        }
        
        .print\\:border-black {
          border-color: black !important;
        }
        
        .print\\:text-black {
          color: black !important;
        }
      }
    `});return{componentRef:s,handlePrint:a}};function ie(){const{pacienteId:s,consultaId:a}=W(),{componentRef:r,handlePrint:o}=ee(),{componentRef:p,handlePrint:u}=se(),{componentRef:c,handlePrint:d}=re(),[h,i]=x.useState(null),[g,b]=x.useState(null),[n,j]=x.useState(null),[N,t]=x.useState([]),[m,f]=x.useState([]);x.useEffect(()=>{a&&(fetch(`${y}api_resultados_laboratorio.php?consulta_id=${a}`).then(l=>l.json()).then(l=>{l.success&&l.resultados?t(l.resultados):t([])}).catch(()=>t([])),fetch(`${y}api_ordenes_laboratorio.php?consulta_id=${a}`).then(l=>l.json()).then(l=>{l.success&&Array.isArray(l.ordenes)?f(l.ordenes):f([])}).catch(()=>f([])))},[a]);const[v,$]=x.useState(null),[R,E]=x.useState(null),[I,L]=x.useState(!0),[T,_]=x.useState(""),[w,C]=x.useState({tiempo_enfermedad:"",forma_inicio:"",curso:"",antecedentes:"",examen_fisico:"",tratamiento:"",receta:[]}),[P,O]=x.useState(!1),[S,F]=x.useState(""),[M,A]=x.useState([]);return x.useEffect(()=>{a&&fetch(`${y}api_historia_clinica.php?consulta_id=${a}`,{credentials:"include"}).then(l=>l.json()).then(l=>{l.success&&l.datos&&(C({...l.datos,receta:Array.isArray(l.datos.receta)?l.datos.receta:[]}),Array.isArray(l.datos.diagnosticos)?A(l.datos.diagnosticos):A([]))})},[a]),x.useEffect(()=>{s&&(L(!0),fetch(`${y}api_pacientes.php?id=${s}`).then(l=>l.json()).then(l=>{l.success&&l.paciente?$(l.paciente):_(l.error||"No se encontr√≥ el paciente"),L(!1)}).catch(()=>{_("Error de conexi√≥n con el servidor"),L(!1)}))},[s]),x.useEffect(()=>{a&&fetch(`${y}api_triaje.php?consulta_id=${a}`).then(l=>l.json()).then(l=>{l.success&&l.triaje&&l.triaje.datos?E(l.triaje.datos):E(null)}).catch(()=>E(null))},[a]),x.useEffect(()=>{fetch(`${y}api_get_configuracion.php`,{credentials:"include"}).then(l=>l.json()).then(l=>{l.success&&l.data&&b(l.data)}).catch(()=>b(null))},[]),x.useEffect(()=>{const l=JSON.parse(sessionStorage.getItem("medico")||"null");l?(i(l),j(l.firma||null)):(i(null),j(null))},[]),I?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-8 border border-white/50 flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"üè• Cargando historia cl√≠nica..."})]})}):T?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-8 border border-red-200 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-600",children:T})]})}):v?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 py-4 sm:py-8 px-2 sm:px-4 overflow-x-hidden",children:[e.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-4 sm:p-6 lg:p-8 mb-6 border border-white/50 w-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"text-center sm:text-left flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold bg-gradient-to-r from-blue-800 to-indigo-800 bg-clip-text text-transparent",children:"üìã Historia Cl√≠nica"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Sistema M√©dico Integral - Cl√≠nica 2 de Mayo"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-green-100 to-blue-100 rounded-full flex-shrink-0",children:[e.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"En l√≠nea"})]})]})}),h&&e.jsx("div",{className:`mb-6 p-4 rounded-2xl border ${n?"bg-green-50/80 border-green-200 backdrop-blur-sm":"bg-amber-50/80 border-amber-200 backdrop-blur-sm"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n?"bg-green-500":"bg-amber-500"}`,children:n?e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${n?"text-green-800":"text-amber-800"}`,children:n?e.jsxs(e.Fragment,{children:["‚úçÔ∏è ",e.jsx("strong",{children:"Firma Digital Activa:"})," Los documentos impresos incluir√°n su firma digital."]}):e.jsxs(e.Fragment,{children:["‚ö†Ô∏è ",e.jsx("strong",{children:"Sin Firma Digital:"})," Los documentos impresos tendr√°n espacio para firma manual."]})}),e.jsxs("p",{className:`text-xs mt-1 ${n?"text-green-600":"text-amber-600"}`,children:["Dr(a). ",h.nombre," ",h.apellido," - CMP: ",h.cmp||"N/A"]})]})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6 border border-white/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"üë§ Informaci√≥n del Paciente"})]}),e.jsx(q,{paciente:v})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6 border border-white/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-red-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"üö® Triaje y Signos Vitales"})]}),e.jsx(G,{triaje:R})]}),e.jsxs("form",{onSubmit:async l=>{l.preventDefault(),O(!0),F("");const k={...w,diagnosticos:M,receta:w.receta},B=await(await fetch(`${y}api_historia_clinica.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({consulta_id:a,datos:k}),credentials:"include"})).json();O(!1),F(B.success?"Guardado correctamente":B.error||"Error al guardar")},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-white/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-violet-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"üìù Anamnesis y Examen F√≠sico"})]}),e.jsx(V,{hc:w,setHc:C})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-white/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"üî¨ Laboratorio y Apoyo Diagn√≥stico"})]}),e.jsx(Y,{consultaId:a,resultadosLab:N,ordenesLab:m})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-white/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"ü©∫ Diagn√≥sticos CIE10"})]}),e.jsx(J,{diagnosticos:M,setDiagnosticos:A})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-white/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"üíä Tratamiento y Receta M√©dica"})]}),e.jsx(X,{receta:w.receta||[],setReceta:l=>C(k=>({...k,receta:typeof l=="function"?l(k.receta):l})),tratamiento:w.tratamiento||"",setTratamiento:l=>C(k=>({...k,tratamiento:l}))})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-white/50",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 w-full",children:[e.jsx("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl font-semibold transition-all duration-200 hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-sm whitespace-nowrap",disabled:P,children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Guardando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),e.jsx("span",{children:"üíæ Guardar HC"})]})}),e.jsxs("button",{type:"button",onClick:()=>{r.current?o():console.warn("Referencia de impresi√≥n no disponible")},className:"inline-flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl font-semibold transition-all duration-200 hover:scale-105 shadow-lg text-sm whitespace-nowrap",title:n?"Imprimir HC con firma digital":"Imprimir HC (sin firma digital)",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:"üñ®Ô∏è HC"}),n&&e.jsx("span",{className:"text-xs bg-white/20 px-1 rounded",children:"‚úçÔ∏è"})]}),e.jsxs("button",{type:"button",onClick:()=>{p.current&&m&&m.length>0?u():console.warn("Referencia de laboratorio no disponible o sin √≥rdenes de laboratorio")},className:"inline-flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-xl font-semibold transition-all duration-200 hover:scale-105 shadow-lg text-sm whitespace-nowrap",disabled:!m||m.length===0,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),e.jsx("span",{children:"üî¨ Lab"})]}),e.jsxs("button",{type:"button",onClick:()=>{c.current&&w.receta&&w.receta.length>0?d():console.warn("Referencia de receta no disponible o sin medicamentos")},className:"inline-flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white rounded-xl font-semibold transition-all duration-200 hover:scale-105 shadow-lg text-sm whitespace-nowrap",disabled:!w.receta||w.receta.length===0,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),e.jsx("span",{children:"üíä Receta"})]})]}),e.jsxs("div",{className:"text-center w-full mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h14a2 2 0 002-2V7a2 2 0 00-2-2h-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"‚úçÔ∏è Firma Digital"})]}),n?e.jsxs("div",{className:"flex flex-col items-center gap-3 max-w-xs mx-auto",children:[e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-3 shadow-sm",children:e.jsx("img",{src:n,alt:"Firma del m√©dico",className:"max-h-16 max-w-[200px] object-contain"})}),e.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 w-full",children:[e.jsxs("div",{className:"text-xs text-gray-600 font-medium",children:[h?.nombre," ",h?.apellido]}),h?.especialidad&&e.jsx("div",{className:"text-xs text-gray-500",children:h.especialidad}),e.jsxs("div",{className:"text-xs text-gray-500",children:["C.M.P. ",h?.cmp||"N/A",h?.rne&&` - R.N.E ${h.rne}`]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Sistema M√©dico Digitalizado"})]})]}):e.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 max-w-xs mx-auto",children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"FIRMA Y SELLO M√âDICO"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Sistema M√©dico Digitalizado"}),e.jsx("div",{className:"text-xs text-orange-500 mt-2 italic",children:"‚ö†Ô∏è No hay firma registrada"})]})]})]}),S&&e.jsx("div",{className:`mt-4 p-4 rounded-xl border text-center font-medium ${S.includes("correctamente")?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[S.includes("correctamente")?e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),S]})})]})]})]}),e.jsx("div",{style:{position:"absolute",top:"-9999px",left:"-9999px"},children:e.jsx("div",{ref:r,children:e.jsx(Q,{paciente:v,triaje:R,hc:w,diagnosticos:M,medicamentos:w.receta,ordenesLaboratorio:m,medicoInfo:h,configuracionClinica:g})})}),e.jsx("div",{style:{position:"absolute",top:"-9999px",left:"-9999px"},children:e.jsx("div",{ref:p,children:e.jsx(K,{paciente:v,ordenesLaboratorio:m,medicoInfo:h,configuracionClinica:g})})}),e.jsx("div",{style:{position:"absolute",top:"-9999px",left:"-9999px"},children:e.jsx("div",{ref:c,children:e.jsx(Z,{paciente:v,medicamentos:w.receta,medicoInfo:h,configuracionClinica:g})})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-8 border border-gray-200 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Paciente no encontrado"}),e.jsx("p",{className:"text-gray-600",children:"No se encontr√≥ informaci√≥n del paciente."})]})})}export{ie as default};
