import{r as t,S as r}from"./vendor-B5yQt2qK.js";import{B as n}from"./examenes-laboratorio-crud-BJk1fG4Z.js";function D(e=null){const[c,p]=t.useState([]),[f,s]=t.useState(!1),[u,l]=t.useState(null),o=async()=>{s(!0);try{const i=e?`${n}api_disponibilidad_medicos.php?medico_id=${e}`:`${n}api_disponibilidad_medicos.php`,d=await(await fetch(i)).json();p(d.disponibilidad||[]),l(null)}catch{l("Error al obtener disponibilidad")}s(!1)};return t.useEffect(()=>{o()},[e]),{disponibilidad:c,loading:f,error:u,fetchDisponibilidad:o,saveDisponibilidad:async(i,a=null)=>{s(!0);try{const d=a?"PUT":"POST",b=a?{...i,id:a}:{...i,medico_id:e};if((await fetch(`${n}api_disponibilidad_medicos.php`,{method:d,headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)r.fire({icon:"success",title:a?"Disponibilidad actualizada":"Disponibilidad agregada",showConfirmButton:!1,timer:1400}),o();else throw new Error}catch{r.fire({icon:"error",title:"Error al guardar",text:"No se pudo guardar la disponibilidad"})}s(!1)},deleteDisponibilidad:async i=>{s(!0);try{if((await fetch(`${n}api_disponibilidad_medicos.php`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i})})).ok)r.fire({icon:"success",title:"Disponibilidad eliminada",showConfirmButton:!1,timer:1400}),o();else throw new Error}catch{r.fire({icon:"error",title:"Error al eliminar",text:"No se pudo eliminar la disponibilidad"})}s(!1)}}}export{D as u};
