const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-B5yQt2qK.js","assets/vendor-DDKpoaqD.css"])))=>i.map(i=>d[i]);
import{j as e,r as N}from"./vendor-B5yQt2qK.js";const Y="modulepreload",K=function(p){return"/"+p},B={},T=function(x,l,r){let u=Promise.resolve();if(l&&l.length>0){let h=function(m){return Promise.all(m.map(_=>Promise.resolve(_).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),i=n?.nonce||n?.getAttribute("nonce");u=h(l.map(m=>{if(m=K(m),m in B)return;B[m]=!0;const _=m.endsWith(".css"),o=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${o}`))return;const a=document.createElement("link");if(a.rel=_?"stylesheet":Y,_||(a.as="script"),a.crossOrigin="",a.href=m,i&&a.setAttribute("nonce",i),document.head.appendChild(a),_)return new Promise((t,d)=>{a.addEventListener("load",t),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${m}`)))})}))}function f(n){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=n,window.dispatchEvent(i),!i.defaultPrevented)throw n}return u.then(n=>{for(const i of n||[])i.status==="rejected"&&f(i.reason);return x().catch(f)})},Z=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1",L=Z?window.location.origin.replace(/\/+$/,"")+"/":"http://localhost/clinica-2demayo/",de={minPasswordLength:0};function ee({open:p,onClose:x,children:l}){return p?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-white rounded shadow-lg p-4 w-full max-w-5xl relative animate-fadeIn flex flex-col",style:{maxHeight:"90vh"},children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl font-bold",onClick:x,"aria-label":"Cerrar",children:"√ó"}),e.jsx("div",{className:"overflow-auto",style:{maxHeight:"70vh",paddingRight:8},children:l})]})}):null}function re({stats:p}){return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm",children:"Total Ex√°menes"}),e.jsx("p",{className:"text-2xl font-bold",children:p.total})]}),e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center text-xl",children:"üß™"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Con Par√°metros"}),e.jsx("p",{className:"text-2xl font-bold",children:p.conParametros})]}),e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center text-xl",children:"üìä"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-100 text-sm",children:"Precio Promedio"}),e.jsxs("p",{className:"text-2xl font-bold",children:["S/ ",p.precioPromedio]})]}),e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center text-xl",children:"üí∞"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-100 text-sm",children:"Metodolog√≠as"}),e.jsx("p",{className:"text-2xl font-bold",children:p.metodologias})]}),e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center text-xl",children:"üî¨"})]})})]})}function te({search:p,setSearch:x,categoriaFilter:l,setCategoriaFilter:r,categorias:u,onNew:f,onExportPDF:n,onExportExcel:i}){return e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"flex-1 max-w-md",children:[e.jsx("div",{className:"relative mb-2",children:e.jsx("input",{type:"text",value:p,onChange:h=>{x(h.target.value)},placeholder:"üîç Buscar por nombre o metodolog√≠a...",className:"w-full px-4 py-3 pl-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})}),e.jsx("div",{className:"relative",children:e.jsxs("select",{value:l,onChange:h=>r(h.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Todas las categor√≠as"}),u.map(h=>e.jsx("option",{value:h,children:h},h))]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[n&&e.jsx("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors shadow-md",children:"üìÑ PDF"}),i&&e.jsx("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors shadow-md",children:"üìä Excel"}),f&&e.jsx("button",{onClick:f,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all font-medium shadow-lg transform hover:scale-105",children:"‚ûï Nuevo Examen"})]})]})})}function se({paginated:p,handleEdit:x,handleDelete:l}){return e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Nombre"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium hidden md:table-cell",children:"Metodolog√≠a"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium hidden md:table-cell",children:"Categor√≠a"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium hidden lg:table-cell",children:"Tubo/Frasco"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium hidden lg:table-cell",children:"Tiempo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Precios"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Acciones"})]})}),e.jsx("tbody",{children:p.map(r=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-purple-50/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center text-purple-600 text-sm",children:"üß™"}),e.jsxs("div",{children:[r.titulo&&e.jsx("div",{className:`text-sm ${r.es_subtitulo?"font-bold text-gray-900":"font-semibold text-gray-700"}`,children:r.titulo}),e.jsx("div",{className:"font-medium text-gray-900",children:r.nombre})]})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 hidden md:table-cell",children:r.metodologia}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 hidden md:table-cell",children:r.categoria||e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 hidden lg:table-cell",children:e.jsxs("div",{className:"space-y-1",children:[r.tipo_tubo&&e.jsxs("div",{children:["üìç ",r.tipo_tubo]}),r.tipo_frasco&&e.jsxs("div",{children:["üß™ ",r.tipo_frasco]})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 hidden lg:table-cell",children:e.jsxs("div",{className:"space-y-1",children:[r.tiempo_resultado&&e.jsxs("div",{children:["‚è±Ô∏è ",r.tiempo_resultado]}),r.condicion_paciente&&e.jsxs("div",{children:["üë§ ",r.condicion_paciente]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"P√∫blico:"}),e.jsxs("span",{className:"font-semibold text-green-600 ml-1",children:["S/ ",r.precio_publico]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Convenio:"}),e.jsxs("span",{className:"font-semibold text-blue-600 ml-1",children:["S/ ",r.precio_convenio]})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>x(r),className:"px-3 py-1.5 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors text-sm font-medium shadow-md",children:"‚úèÔ∏è Editar"}),e.jsx("button",{onClick:()=>l(r.id),className:"px-3 py-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium shadow-md",children:"üóëÔ∏è Eliminar"})]})})]},r.id))})]})})})}function ae({paginated:p,handleEdit:x,handleDelete:l}){return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(r=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-6 hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center text-purple-600",children:"üß™"}),e.jsx("div",{className:"text-lg font-bold text-gray-900 line-clamp-1",children:r.nombre})]})}),e.jsxs("div",{className:"space-y-3",children:[r.titulo&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"T√≠tulo"}),e.jsx("p",{className:`text-sm ${r.es_subtitulo?"font-bold text-gray-900":"font-semibold text-gray-700"}`,children:r.titulo})]}),r.categoria&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Categor√≠a"}),e.jsx("p",{className:"text-sm text-gray-700",children:r.categoria})]}),r.metodologia&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Metodolog√≠a"}),e.jsx("p",{className:"text-sm text-gray-700",children:r.metodologia})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Precio P√∫blico"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["S/ ",r.precio_publico]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Precio Convenio"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["S/ ",r.precio_convenio]})]})]}),(r.tipo_tubo||r.tipo_frasco)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Muestras"}),e.jsxs("div",{className:"space-y-1",children:[r.tipo_tubo&&e.jsxs("p",{className:"text-sm text-gray-700",children:["üìç ",r.tipo_tubo]}),r.tipo_frasco&&e.jsxs("p",{className:"text-sm text-gray-700",children:["üß™ ",r.tipo_frasco]})]})]}),(r.tiempo_resultado||r.condicion_paciente)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Informaci√≥n"}),e.jsxs("div",{className:"space-y-1",children:[r.tiempo_resultado&&e.jsxs("p",{className:"text-sm text-gray-700",children:["‚è±Ô∏è ",r.tiempo_resultado]}),r.condicion_paciente&&e.jsxs("p",{className:"text-sm text-gray-700",children:["üë§ ",r.condicion_paciente]})]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:()=>x(r),className:"flex-1 bg-gradient-to-r from-amber-500 to-orange-500 text-white py-2.5 px-4 rounded-lg hover:from-amber-600 hover:to-orange-600 transition-all font-medium text-sm shadow-md",children:"‚úèÔ∏è Editar"}),e.jsx("button",{onClick:()=>l(r.id),className:"flex-1 bg-gradient-to-r from-red-500 to-pink-500 text-white py-2.5 px-4 rounded-lg hover:from-red-600 hover:to-pink-600 transition-all font-medium text-sm shadow-md",children:"üóëÔ∏è Eliminar"})]})]},r.id))})}const oe={tipo:"Par√°metro",nombre:"",metodologia:"",unidad:"",opciones:[],referencias:[],formula:"",negrita:!1,color_texto:"#000000",color_fondo:"#ffffff",orden:1};function le({initialData:p=[],onChange:x}){const l=o=>{let a=[];try{if(!o)return[];if(typeof o=="string"){const t=JSON.parse(o);Array.isArray(t)&&(a=t)}else Array.isArray(o)&&(a=o)}catch(t){console.error("Error parsing valores_referenciales:",t),a=[]}return a.map((t,d)=>({tipo:t.tipo||"Par√°metro",nombre:typeof t.nombre=="string"?t.nombre:t.titulo||"",metodologia:t.metodologia||"",unidad:t.unidad||"",opciones:Array.isArray(t.opciones)?t.opciones:[],referencias:Array.isArray(t.referencias)?t.referencias:[],formula:t.formula||"",negrita:!!t.negrita,color_texto:t.color_texto||"#000000",color_fondo:t.color_fondo||"#ffffff",orden:typeof t.orden=="number"?t.orden:d+1}))},[r,u]=N.useState(()=>l(p));N.useEffect(()=>{u(l(p))},[p]);const f=o=>{u([...r,{...oe,tipo:o,nombre:"",orden:r.length+1}])},n=(o,a,t)=>{const d=r.map((g,w)=>w===o?{...g,[a]:t}:g);u(d),x&&x(d)},i=o=>{const a=r.filter((t,d)=>d!==o);u(a),x&&x(a)},h=o=>{const a=r.map((t,d)=>d===o?{...t,referencias:[...t.referencias,{valor:"",desc:"",valor_min:"",valor_max:""}]}:t);u(a),x&&x(a)},m=(o,a,t,d)=>{const g=r.map((w,y)=>{if(y!==o)return w;const P=w.referencias.map((E,A)=>A===a?{...E,[t]:d}:E);return{...w,referencias:P}});u(g),x&&x(g)},_=(o,a)=>{const t=r.map((d,g)=>{if(g!==o)return d;const w=d.referencias.filter((y,P)=>P!==a);return{...d,referencias:w}});u(t),x&&x(t)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("button",{type:"button",className:"bg-green-600 text-white px-3 py-1 rounded",onClick:()=>f("Par√°metro"),children:"+ Par√°metro"}),e.jsx("button",{type:"button",className:"bg-blue-600 text-white px-3 py-1 rounded",onClick:()=>f("Subt√≠tulo"),children:"+ Subt√≠tulo"})]}),r.map((o,a)=>e.jsxs("div",{className:"border rounded p-3 bg-gray-50 relative",children:[e.jsx("button",{type:"button",className:"absolute top-2 right-2 text-red-600 bg-red-100 hover:bg-red-200 border border-red-300 rounded-md px-2 py-1 transition-all flex items-center justify-center",style:{minWidth:56,fontSize:13},onClick:()=>i(a),children:"Eliminar"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 items-center",children:[e.jsxs("select",{value:o.tipo,onChange:t=>n(a,"tipo",t.target.value),className:"border rounded px-2 py-1",children:[e.jsx("option",{value:"Par√°metro",children:"Par√°metro"}),e.jsx("option",{value:"Subt√≠tulo",children:"Subt√≠tulo"})]}),e.jsx("input",{value:o.nombre,onChange:t=>n(a,"nombre",t.target.value),placeholder:"Nombre",className:"border rounded px-2 py-1 flex-1"}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:o.negrita,onChange:t=>n(a,"negrita",t.target.checked)})," Negrita"]}),e.jsx("input",{type:"color",value:o.color_texto,onChange:t=>n(a,"color_texto",t.target.value),title:"Color texto",style:{width:28,height:28,minWidth:28,minHeight:28,padding:0,border:"none"}}),e.jsx("input",{type:"color",value:o.color_fondo,onChange:t=>n(a,"color_fondo",t.target.value),title:"Color fondo",style:{width:28,height:28,minWidth:28,minHeight:28,padding:0,border:"none",marginRight:64}})]}),o.tipo==="Par√°metro"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{value:o.metodologia,onChange:t=>n(a,"metodologia",t.target.value),placeholder:"Metodolog√≠a",className:"border rounded px-2 py-1 flex-1"}),e.jsx("input",{value:o.unidad,onChange:t=>n(a,"unidad",t.target.value),placeholder:"Unidad",className:"border rounded px-2 py-1 w-32"}),e.jsx("input",{value:o.formula,onChange:t=>n(a,"formula",t.target.value),placeholder:"F√≥rmula (opcional)",className:"border rounded px-2 py-1 flex-1"})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Referencias:"}),e.jsx("button",{type:"button",className:"ml-2 text-green-600",onClick:()=>h(a),children:"+ Referencia"}),o.referencias.map((t,d)=>e.jsxs("div",{className:"flex gap-2 mt-1 items-center flex-wrap relative",children:[e.jsx("input",{value:t.valor,onChange:g=>m(a,d,"valor",g.target.value),placeholder:"Valor texto",className:"border rounded px-2 py-1 w-28"}),e.jsx("input",{value:t.valor_min,onChange:g=>m(a,d,"valor_min",g.target.value),placeholder:"Min",className:"border rounded px-2 py-1 w-16"}),e.jsx("input",{value:t.valor_max,onChange:g=>m(a,d,"valor_max",g.target.value),placeholder:"Max",className:"border rounded px-2 py-1 w-16"}),e.jsx("input",{value:t.desc,onChange:g=>m(a,d,"desc",g.target.value),placeholder:"Descripci√≥n",className:"border rounded px-2 py-1 flex-1"}),e.jsx("button",{type:"button",className:"text-red-600 bg-red-100 hover:bg-red-200 border border-red-300 rounded-md px-2 py-1 ml-6 transition-all flex items-center justify-center",style:{minWidth:56,fontSize:13,alignSelf:"center"},onClick:()=>_(a,d),children:"Eliminar"})]},d))]})]})]},a))]})}function ne({open:p,onClose:x,form:l,handleChange:r,handleValoresReferencialesChange:u,handleSubmit:f,editId:n}){return e.jsx(ee,{open:p,onClose:x,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:n?"‚úèÔ∏è":"‚ûï"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:n?"Editar Examen":"Nuevo Examen"}),e.jsx("p",{className:"text-purple-100",children:n?"Modifique los datos del examen":"Complete la informaci√≥n del nuevo examen"})]})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nombre del Examen *"}),e.jsx("input",{name:"nombre",value:l.nombre,onChange:r,placeholder:"Ej: Hemograma Completo",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Categor√≠a"}),e.jsx("input",{name:"categoria",value:l.categoria,onChange:r,placeholder:"Ej: Hematolog√≠a, Qu√≠mica Cl√≠nica, Serolog√≠a, etc.",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Metodolog√≠a"}),e.jsx("input",{name:"metodologia",value:l.metodologia,onChange:r,placeholder:"Ej: Citometr√≠a de flujo",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"üß™ Par√°metros y Valores de Referencia"}),e.jsx(le,{initialData:l.valores_referenciales,onChange:u})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"üëÅÔ∏è Previsualizaci√≥n del Formato de Resultados"}),e.jsx("div",{className:"bg-white border rounded-lg p-4 overflow-auto max-h-80",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-purple-100 to-indigo-100",children:[e.jsx("th",{className:"p-2 text-left font-semibold",children:"Examen / Par√°metro"}),e.jsx("th",{className:"p-2 text-left font-semibold",children:"Metodolog√≠a"}),e.jsx("th",{className:"p-2 text-left font-semibold",children:"Resultado"}),e.jsx("th",{className:"p-2 text-left font-semibold",children:"Unidades"}),e.jsx("th",{className:"p-2 text-left font-semibold",children:"Valores de Referencia"})]})}),e.jsx("tbody",{children:Array.isArray(l.valores_referenciales)&&l.valores_referenciales.length>0?l.valores_referenciales.sort((i,h)=>(i.orden||0)-(h.orden||0)).map((i,h)=>i.tipo==="Subt√≠tulo"?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:`py-2 px-2 ${i.negrita?"font-bold":"font-semibold"}`,style:{background:i.color_fondo,color:i.color_texto,fontWeight:i.negrita?"bold":"normal"},children:i.nombre})},h):e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2",style:{background:i.color_fondo,color:i.color_texto,fontWeight:i.negrita?"bold":"normal"},children:i.nombre}),e.jsx("td",{className:"py-2 px-2 text-center",children:i.metodologia||""}),e.jsx("td",{className:"py-2 px-2 text-center text-gray-400",children:"[Resultado]"}),e.jsx("td",{className:"py-2 px-2 text-center",children:i.unidad||""}),e.jsx("td",{className:"py-2 px-2 text-center",children:i.referencias&&i.referencias.length>0?e.jsx("ul",{className:"list-none p-0 m-0",children:i.referencias.map((m,_)=>e.jsxs("li",{children:[e.jsxs("span",{className:"text-gray-700",children:[m.valor||"",(m.valor_min||m.valor_max)&&e.jsxs(e.Fragment,{children:[" ","(",m.valor_min?m.valor_min:"-"," - ",m.valor_max?m.valor_max:"-",")"]})]}),m.desc&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",m.desc,")"]})]},_))}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},h)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center text-gray-400 py-4",children:"Sin par√°metros definidos"})})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"üí∞ Precio P√∫blico (S/)"}),e.jsx("input",{name:"precio_publico",value:l.precio_publico,onChange:r,placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",type:"number",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"üè• Precio Convenio (S/)"}),e.jsx("input",{name:"precio_convenio",value:l.precio_convenio,onChange:r,placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",type:"number",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"üß™ Tipo de Tubo"}),e.jsx("input",{name:"tipo_tubo",value:l.tipo_tubo,onChange:r,placeholder:"Ej: Tubo con EDTA",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"üß™ Tipo de Frasco"}),e.jsx("input",{name:"tipo_frasco",value:l.tipo_frasco,onChange:r,placeholder:"Ej: Frasco est√©ril",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"‚è±Ô∏è Tiempo de Resultado"}),e.jsx("input",{name:"tiempo_resultado",value:l.tiempo_resultado,onChange:r,placeholder:"Ej: 2-4 horas",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"üë§ Condici√≥n del Paciente"}),e.jsx("input",{name:"condicion_paciente",value:l.condicion_paciente,onChange:r,placeholder:"Ej: Ayuno 12h",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"üìã Preanal√≠tica"}),e.jsx("input",{name:"preanalitica",value:l.preanalitica,onChange:r,placeholder:"Condiciones especiales",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:x,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium border border-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all font-medium shadow-lg hover:shadow-xl transform hover:scale-105",children:n?"üíæ Actualizar Examen":"‚ú® Crear Examen"})]})]})})]})})}function ie(){const[p,x]=N.useState("table"),[l,r]=N.useState(5),[u,f]=N.useState(0),[n,i]=N.useState([]),[h,m]=N.useState(""),[_,o]=N.useState({nombre:"",categoria:"",metodologia:"",valores_referenciales:[{tipo:"Par√°metro",nombre:"",metodologia:"",unidad:"",referencias:[],formula:""}],precio_publico:"",precio_convenio:"",tipo_tubo:"",tipo_frasco:"",tiempo_resultado:"",condicion_paciente:"",preanalitica:"",titulo:"",es_subtitulo:!1}),[a,t]=N.useState(!1),[d,g]=N.useState(null),[w,y]=N.useState(""),[P,E]=N.useState("success"),[A,O]=N.useState(!1),I=async()=>{try{const s=(await T(async()=>{const{default:b}=await import("./vendor-B5yQt2qK.js").then(C=>C.P);return{default:b}},__vite__mapDeps([0,1]))).default,c=(await T(async()=>{const{default:b}=await import("./vendor-B5yQt2qK.js").then(C=>C.Q);return{default:b}},__vite__mapDeps([0,1]))).default,j=new s;j.text("Ex√°menes de Laboratorio",14,10),c(j,{head:[["Nombre","Metodolog√≠a","Tubo","Frasco","Tiempo","P√∫blico","Convenio"]],body:k.map(b=>[b.nombre,b.metodologia,b.tipo_tubo,b.tipo_frasco,b.tiempo_resultado,b.precio_publico,b.precio_convenio]),startY:18,styles:{fontSize:8}}),j.save("examenes_laboratorio.pdf")}catch{}},U=async()=>{const s=await T(()=>import("./vendor-B5yQt2qK.js").then(v=>v.O),__vite__mapDeps([0,1])),c=s.utils.json_to_sheet(k.map(v=>({Nombre:v.nombre,Metodolog√≠a:v.metodologia,Tubo:v.tipo_tubo,Frasco:v.tipo_frasco,Tiempo:v.tiempo_resultado,P√∫blico:v.precio_publico,Convenio:v.precio_convenio}))),j=s.utils.book_new();s.utils.book_append_sheet(j,c,"Examenes");const b=s.write(j,{bookType:"xlsx",type:"array"}),{saveAs:C}=await T(async()=>{const{saveAs:v}=await import("./vendor-B5yQt2qK.js").then(X=>X.F);return{saveAs:v}},__vite__mapDeps([0,1]));C(new Blob([b],{type:"application/octet-stream"}),"examenes_laboratorio.xlsx")},M=async()=>{O(!0);const c=await(await fetch(L+"api_examenes_laboratorio.php",{credentials:"include"})).json();i(c.examenes||[]),O(!1)};N.useEffect(()=>{M()},[]);const W=s=>{const{name:c,value:j,type:b,checked:C}=s.target;o(v=>({...v,[c]:b==="checkbox"?C:j}))},H=s=>{o(c=>({...c,valores_referenciales:s}))},$=s=>{if(!s)return[];try{if(typeof s=="string"){const c=JSON.parse(s);if(Array.isArray(c))s=c;else return[]}}catch{return[]}return s.map((c,j)=>({tipo:c.tipo||"Par√°metro",nombre:c.nombre||c.titulo||""||`Item ${j+1}`,metodologia:c.metodologia||"",unidad:c.unidad||"",referencias:Array.isArray(c.referencias)?c.referencias:[],formula:c.formula||"",negrita:!!c.negrita,color_texto:c.color_texto||"#000000",color_fondo:c.color_fondo||"#ffffff",orden:typeof c.orden=="number"?c.orden:j+1}))},q=async s=>{s.preventDefault(),y(""),E("success");try{const c=d?"PUT":"POST",j=L+"api_examenes_laboratorio.php"+(d?`?id=${d}`:""),b={..._,valores_referenciales:$(_.valores_referenciales)};d&&(b.id=d);const v=await(await fetch(j,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(b),credentials:"include"})).json();v.success?(y(d?"‚úÖ Examen actualizado correctamente":"‚úÖ Examen creado correctamente"),E("success"),o({nombre:"",categoria:"",metodologia:"",valores_referenciales:[{tipo:"Par√°metro",nombre:"",metodologia:"",unidad:"",referencias:[],formula:""}],precio_publico:"",precio_convenio:"",tipo_tubo:"",tipo_frasco:"",tiempo_resultado:"",condicion_paciente:"",preanalitica:"",titulo:"",es_subtitulo:!1}),g(null),t(!1),M(),setTimeout(()=>y(""),3e3)):(y("‚ùå "+(v.error||"Error al guardar")),E("error"))}catch{y("‚ùå Error de conexi√≥n"),E("error")}},D=s=>{const c=$(s.valores_referenciales);o({...s,categoria:s.categoria||"",valores_referenciales:c.length?c:[{tipo:"Par√°metro",nombre:"",metodologia:"",unidad:"",referencias:[],formula:""}],titulo:s.titulo||"",es_subtitulo:s.es_subtitulo||!1}),g(s.id),y(""),t(!0)},V=()=>{o({nombre:"",categoria:"",metodologia:"",valores_referenciales:[{tipo:"Par√°metro",nombre:"",metodologia:"",unidad:"",referencias:[],formula:""}],precio_publico:"",precio_convenio:"",tipo_tubo:"",tipo_frasco:"",tiempo_resultado:"",condicion_paciente:"",preanalitica:"",titulo:"",es_subtitulo:!1}),g(null),y(""),t(!0)},z=async s=>{if(window.confirm("¬øEst√° seguro de eliminar este examen? Esta acci√≥n no se puede deshacer."))try{const j=await(await fetch(L+`api_examenes_laboratorio.php?id=${s}`,{method:"DELETE",credentials:"include"})).json();j.success?(y("‚úÖ Examen eliminado correctamente"),E("success"),M(),setTimeout(()=>y(""),3e3)):(y("‚ùå "+(j.error||"Error al eliminar")),E("error"))}catch{y("‚ùå Error de conexi√≥n"),E("error")}},[R,J]=N.useState(""),G=Array.from(new Set(n.map(s=>s.categoria).filter(Boolean))),k=n.filter(s=>(s.nombre.toLowerCase().includes(h.toLowerCase())||s.metodologia.toLowerCase().includes(h.toLowerCase()))&&(R===""||s.categoria===R)),Q={total:n.length,conParametros:n.filter(s=>s.valores_referenciales&&Array.isArray(s.valores_referenciales)&&s.valores_referenciales.length>0).length,precioPromedio:n.length>0?Math.round(n.reduce((s,c)=>s+(parseFloat(c.precio_publico)||0),0)/n.length):0,metodologias:[...new Set(n.map(s=>s.metodologia).filter(Boolean))].length},S=Math.ceil(k.length/l),F=k.slice(u*l,(u+1)*l);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 text-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl",children:"üî¨"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Gesti√≥n de Ex√°menes de Laboratorio"}),e.jsx("p",{className:"text-purple-100",children:"Administre el cat√°logo completo de ex√°menes y pruebas de laboratorio"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx(re,{stats:Q}),w&&e.jsx("div",{className:`mb-6 p-4 rounded-lg border ${P==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:e.jsx("div",{className:"flex items-center gap-2 font-medium",children:w})}),e.jsx(te,{search:h,setSearch:s=>{m(s),f(0)},categoriaFilter:R,setCategoriaFilter:s=>{J(s),f(0)},categorias:G,onExportPDF:I,onExportExcel:U,onNew:V}),e.jsx(ne,{open:a,onClose:()=>t(!1),form:_,setForm:o,editId:d,setEditId:g,msg:w,setMsg:y,msgType:P,setMsgType:E,handleSubmit:q,handleChange:W,handleValoresReferencialesChange:H}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Vista:"}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>x("table"),className:`px-3 py-1 rounded-md text-sm transition-colors ${p==="table"?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"üìä Tabla"}),e.jsx("button",{onClick:()=>x("cards"),className:`px-3 py-1 rounded-md text-sm transition-colors ${p==="cards"?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"üóÉÔ∏è Tarjetas"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Por p√°gina:"}),e.jsxs("select",{value:l,onChange:s=>{r(Number(s.target.value)),f(0)},className:"border border-gray-300 rounded-lg px-3 py-1 text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[F.length," de ",k.length," ex√°menes"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{disabled:u===0,onClick:()=>f(s=>Math.max(0,s-1)),className:"px-3 py-1 rounded-lg bg-gray-100 disabled:opacity-50 hover:bg-gray-200 transition-colors",children:"‚Üê"}),e.jsxs("span",{className:"px-3 py-1 text-sm",children:[u+1," / ",S||1]}),e.jsx("button",{disabled:u>=S-1,onClick:()=>f(s=>Math.min(S-1,s+1)),className:"px-3 py-1 rounded-lg bg-gray-100 disabled:opacity-50 hover:bg-gray-200 transition-colors",children:"‚Üí"})]})]})]})]}),A?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsxs("div",{className:"flex items-center gap-3 text-purple-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"text-lg",children:"Cargando ex√°menes de laboratorio..."})]})}):n.length===0?e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üî¨"}),e.jsx("p",{className:"text-gray-600 text-lg mb-4",children:"No hay ex√°menes registrados"}),e.jsx("button",{onClick:V,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all font-medium shadow-lg transform hover:scale-105",children:"‚ûï Crear Primer Examen"})]}):k.length===0?e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üîç"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No se encontraron ex√°menes con los filtros aplicados"})]}):e.jsx(e.Fragment,{children:p==="table"?e.jsx(se,{paginated:F,handleEdit:D,handleDelete:z,page:u,setPage:f,totalPages:S,rowsPerPage:l,setRowsPerPage:r,filteredLength:k.length}):e.jsx(ae,{paginated:F,handleEdit:D,handleDelete:z})})]})]})}const me=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));export{L as B,me as E,ee as M,de as S,T as _};
