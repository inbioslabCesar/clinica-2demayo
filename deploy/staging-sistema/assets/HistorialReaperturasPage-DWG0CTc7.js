import{j as e,r as i}from"./vendor-B5yQt2qK.js";import{B as m}from"./examenes-laboratorio-crud-BJk1fG4Z.js";function h({rowsPerPage:a,setRowsPerPage:t,setPage:l}){return e.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[e.jsx("label",{className:"font-semibold",children:"Filas por página:"}),e.jsxs("select",{value:a,onChange:n=>{t(Number(n.target.value)),l(1)},className:"input max-w-[80px]",children:[e.jsx("option",{value:3,children:"3"}),e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"})]})]})}function u({historial:a}){return e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Historial de Reaperturas"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Últimas 10 reaperturas"})]}),e.jsx("div",{className:"p-4 space-y-3",children:a.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay reaperturas registradas"}):a.map((t,l)=>e.jsx("div",{className:"border-l-4 border-yellow-400 pl-3 py-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Caja ID ",t.caja_id]}),e.jsx("p",{className:"text-xs text-gray-600",children:t.usuario_nombre}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.motivo})]}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(t.fecha_reapertura).toLocaleString()})]})},l))})]})}const j=()=>{const[a,t]=i.useState([]),[l,n]=i.useState(!0),[r,x]=i.useState(3),[s,o]=i.useState(1);return i.useEffect(()=>{(async()=>{try{n(!0);const c=await fetch(m+"api_cajas_cerradas.php",{credentials:"include"});if(c.ok){const d=await c.json();d.success&&t(d.historial_reaperturas||[])}}catch(c){console.error("Error al cargar historial:",c)}finally{n(!1)}})()},[]),e.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:e.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center",children:[e.jsx("svg",{className:"w-8 h-8 mr-3 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})}),"Historial de Reaperturas"]}),e.jsx("p",{className:"text-gray-600",children:"Listado completo de reaperturas de caja"})]}),l?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Cargando historial..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full flex flex-col items-end mb-4",children:e.jsx(h,{rowsPerPage:r,setRowsPerPage:x,setPage:o})}),e.jsx(u,{historial:a.slice((s-1)*r,s*r)}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{children:["Página ",s," de ",Math.max(1,Math.ceil(a.length/r))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn btn-sm",disabled:s===1,onClick:()=>o(s>1?s-1:1),children:"Anterior"}),e.jsx("button",{className:"btn btn-sm",disabled:s===Math.max(1,Math.ceil(a.length/r)),onClick:()=>o(s<Math.ceil(a.length/r)?s+1:s),children:"Siguiente"})]})]})]})]})})},f=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));export{j as H,h as R,f as a};
