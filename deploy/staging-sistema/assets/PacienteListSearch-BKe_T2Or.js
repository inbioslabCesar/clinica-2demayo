import{r as n,j as e}from"./vendor-B5yQt2qK.js";import{B as g}from"./examenes-laboratorio-crud-BJk1fG4Z.js";function w({onPacienteEncontrado:r,onNoEncontrado:u,onNuevaBusqueda:i}){const[c,x]=n.useState(""),[d,b]=n.useState("dni"),[t,o]=n.useState([]),[p,m]=n.useState(!1),[h,l]=n.useState(!1),f=async s=>{if(s.preventDefault(),!!c.trim()){m(!0),o([]);try{const a=await(await fetch(g+"api_pacientes_buscar.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tipo:d,valor:c})})).json();a.success&&Array.isArray(a.pacientes)&&a.pacientes.length>0?(o(a.pacientes),l(!1),a.pacientes.length===1&&r&&(l(!1),r(a.pacientes[0]))):(o([]),l(!0),u())}catch{o([]),u()}m(!1)}},y=s=>{x(s.target.value),l(!1),i&&i()},j=s=>{b(s.target.value),l(!1),i&&i()};return e.jsxs("div",{className:"mb-4",children:[e.jsxs("form",{onSubmit:f,className:"flex flex-col md:flex-row gap-2 mb-4",children:[e.jsxs("select",{value:d,onChange:j,className:"border rounded px-2 py-1",children:[e.jsx("option",{value:"dni",children:"DNI"}),e.jsx("option",{value:"nombre",children:"Nombre y Apellido"}),e.jsx("option",{value:"historia",children:"Historia ClÃ­nica"})]}),e.jsx("input",{type:"text",value:c,onChange:y,placeholder:`Buscar por ${d}`,className:"border rounded px-2 py-1 flex-1"}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white rounded px-4 py-1 font-bold",disabled:p,children:"Buscar"})]}),p&&e.jsx("div",{className:"text-blue-600",children:"Buscando..."}),t.length>0&&e.jsxs("div",{className:"mt-2 bg-blue-50 rounded-lg p-2",children:[e.jsx("div",{className:"font-bold mb-2",children:"Selecciona un paciente:"}),e.jsx("ul",{className:"divide-y divide-blue-100",children:t.length===1?e.jsx("li",{className:"py-2 flex flex-col md:flex-row md:items-center gap-2",children:e.jsxs("span",{className:"w-full px-3 py-2 rounded bg-blue-100 font-semibold text-blue-900",children:[t[0].nombre," ",t[0].apellido," | DNI: ",t[0].dni," | HC: ",t[0].historia_clinica]})},t[0].id):t.map(s=>e.jsx("li",{className:"py-2 flex flex-col md:flex-row md:items-center gap-2",children:e.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 rounded bg-blue-100 hover:bg-blue-200 font-semibold text-blue-900",onClick:()=>{l(!1),r(s)},children:[s.nombre," ",s.apellido," | DNI: ",s.dni," | HC: ",s.historia_clinica]})},s.id))})]}),h&&e.jsx("div",{className:"mt-2",children:e.jsx("button",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded border border-yellow-300 text-sm",disabled:!0,children:"Paciente no encontrado"})})]})}export{w as P};
