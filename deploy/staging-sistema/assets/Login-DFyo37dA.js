import{r as u,u as I,j as e,I as n}from"./vendor-B5yQt2qK.js";import{B as p,S as j}from"./examenes-laboratorio-crud-BJk1fG4Z.js";function _({onLogin:i}){const[o,v]=u.useState(""),[l,N]=u.useState(""),[b,m]=u.useState(""),[g,x]=u.useState(!1),[f,y]=u.useState(!1),h=I(),S=()=>window.location.protocol!=="https:"&&window.location.hostname!=="localhost"?{isValid:!1,message:"⚠️ Conexión insegura detectada. Se requiere HTTPS para proteger tus credenciales."}:l.length<j.minPasswordLength?{isValid:!1,message:`La contraseña debe tener al menos ${j.minPasswordLength} caracteres`}:{isValid:!0},C=async d=>{d.preventDefault(),m(""),x(!0);const w=S();if(!w.isValid){m(w.message),x(!1);return}const k=o.includes("@")&&o.includes(".");try{if(k){let a,t;try{a=await fetch(p+"api_login_medico.php",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({email:o,password:l}),credentials:"include"}),t=await a.json()}catch{a={ok:!1},t={}}if(a.ok&&t.success){const c={...t.medico,rol:"medico"};sessionStorage.setItem("medico",JSON.stringify(c)),i&&i(c),h("/");return}let r,s;try{r=await fetch(p+"api_login.php",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({usuario:o,password:l}),credentials:"include"}),s=await r.json()}catch{r={ok:!1},s={}}if(r.ok&&s.success){sessionStorage.setItem("usuario",JSON.stringify(s.usuario)),s.usuario.rol?sessionStorage.setItem("user_role",s.usuario.rol):sessionStorage.setItem("user_role","recepcionista"),i&&i(s.usuario),h("/");return}}else{let a,t;try{a=await fetch(p+"api_login.php",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({usuario:o,password:l}),credentials:"include"}),t=await a.json()}catch{a={ok:!1},t={}}if(a.ok&&t.success){sessionStorage.setItem("usuario",JSON.stringify(t.usuario)),t.usuario.rol?sessionStorage.setItem("user_role",t.usuario.rol):sessionStorage.setItem("user_role","recepcionista"),i&&i(t.usuario),h("/");return}let r,s;try{r=await fetch(p+"api_login_medico.php",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({email:o,password:l}),credentials:"include"}),s=await r.json()}catch{r={ok:!1},s={}}if(r.ok&&s.success){const c={...s.medico,rol:"medico"};sessionStorage.setItem("medico",JSON.stringify(c)),i&&i(c),h("/");return}}m("Usuario o contraseña incorrectos")}catch{m("Error de conexión con el servidor")}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-800 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-400/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-purple-400/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-3/4 left-1/2 w-64 h-64 bg-indigo-400/20 rounded-full blur-3xl"})]}),e.jsx("div",{className:"relative z-10 w-full max-w-md",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 shadow-2xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"relative mx-auto w-20 h-20 mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full blur-lg opacity-60"}),e.jsx("img",{src:"/2demayo.svg",alt:"Logo clínica",className:"relative w-20 h-20 object-contain bg-white/90 rounded-full p-3 shadow-lg ring-4 ring-white/30"})]}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2 drop-shadow-lg",children:"Clínica 2 de Mayo"}),e.jsx("p",{className:"text-lg text-white/80",children:"Acceso al Sistema Médico"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(n,{iconName:"Contact",className:"text-xl text-white/60"})}),e.jsx("input",{type:"text",placeholder:"Usuario o email del médico",value:o,onChange:d=>v(d.target.value),className:"w-full bg-white/10 border border-white/20 rounded-2xl pl-12 pr-4 py-4 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent backdrop-blur-sm transition-all duration-300",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(n,{iconName:"Lock",className:"text-xl text-white/60"})}),e.jsx("input",{type:f?"text":"password",placeholder:"Contraseña",value:l,onChange:d=>N(d.target.value),className:"w-full bg-white/10 border border-white/20 rounded-2xl pl-12 pr-12 py-4 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent backdrop-blur-sm transition-all duration-300",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!f),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-white/60 hover:text-white transition-colors",children:e.jsx(n,{iconName:f?"Hide":"RedEye",className:"text-xl"})})]}),e.jsxs("button",{type:"submit",disabled:g,className:"w-full bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 hover:from-blue-700 hover:via-purple-700 hover:to-indigo-800 text-white font-bold rounded-2xl py-4 px-6 shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-3 relative overflow-hidden",children:[g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Verificando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{iconName:"SignIn",className:"text-xl"}),e.jsx("span",{children:"Ingresar al Sistema"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]}),b&&e.jsx("div",{className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-2xl p-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-200",children:[e.jsx(n,{iconName:"ErrorBadge",className:"text-xl"}),e.jsx("span",{className:"font-medium",children:b})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white/60 text-sm",children:[e.jsx(n,{iconName:"Shield",className:"text-lg"}),e.jsx("span",{children:"Sistema Seguro y Confiable"})]})})]})})]})}export{_ as default};
